<%@ page language="java" import="java.util.*" pageEncoding="UTF-8"%>
<%@ taglib prefix="shiro" uri="http://shiro.apache.org/tags"%>
<%
	String path = request.getContextPath();
	String basePath = request.getScheme() + "://"
			+ request.getServerName() + ":" + request.getServerPort()
			+ path + "/";
%>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<base href="<%=basePath%>">
    <title>信贷合同信息</title>
	<jsp:include page="../../layout/script.jsp"></jsp:include>

<style type="text/css">

</style>
<script type="text/javascript">
$(function(){
	// 查看申请状态
	$datagrid = $("#loanContractInfoTab").datagrid({
		url : "loanContract/loanContractAction!findLoanContractInfo.action",
		width : 'auto',
		height : parseInt($(this).height()*0.86),
		pagination:true,
		rownumbers:true,
		border:true,
		singleSelect:true,
		nowrap:true,
		multiSort:false,
		columns : [ [ 
		              {field : 'organizationId',title : '所属地区',width : parseInt($(this).width()*0.1),align : 'center'},
		              {field : 'contractNo',title : '合同编号',width :parseInt($(this).width()*0.09),align : 'center',
			            	formatter:function(value,row,index){
			            		return "<a href='javascript:void(0);' onclick=''>"+value+"</a>　　" ;
			            	}  
		              },
		              {field : 'loanTypeName',title : '贷款类型',width : parseInt($(this).width()*0.1),align : 'center'},
		              {field : 'contractSignDate',title : '合同签署日期',width : parseInt($(this).width()*0.1),align : 'center'},
		              {field : 'loanName',title : '客户姓名',width : parseInt($(this).width()*0.1),align : 'center'},
		              {field : 'loanIdNo',title : '身份证号码',width : parseInt($(this).width()*0.1),align : 'center'},
		              {field : 'loanHukouAddr',title : '身份证地址',width : parseInt($(this).width()*0.1),align : 'center'},
		              {field : 'loanCurAddr',title : '通讯地址',width : parseInt($(this).width()*0.1),align : 'center'},
		              {field : 'loanMobileTel',title : '联系方式',width : parseInt($(this).width()*0.1),align : 'center'},
		              {field : 'loanerActName',title : '开户行名称',width : parseInt($(this).width()*0.1),align : 'center'},
		              {field : 'loanerActNum',title : '开户行账号',width : parseInt($(this).width()*0.1),align : 'center'},
		              {field : 'loanBgDate',title : '放款日期',width : parseInt($(this).width()*0.1),align : 'center'},
		              {field : 'loanEdu',title : '贷款金额(元)',width : parseInt($(this).width()*0.1),align : 'center'},
		              {field : 'loanPeriod',title : '贷款期数(期)',width : parseInt($(this).width()*0.1),align : 'center'},
		              {field : 'monthlyFee',title : '服务费(元)',width : parseInt($(this).width()*0.1),align : 'center'},
		              {field : 'visitFee',title : '外访费(元)',width : parseInt($(this).width()*0.1),align : 'center'},
		              {field : 'loanEdu',title : '放款金额(元)',width : parseInt($(this).width()*0.1),align : 'center'},
		              {field : 'monthlyRepayment',title : '月还金额(元)',width : parseInt($(this).width()*0.1),align : 'center'},
		              {field : 'monthlyRepaymentDate',title : '月还款日',width : parseInt($(this).width()*0.1),align : 'center'},
		              {field : 'drawPlatform',title : '划扣平台',width : parseInt($(this).width()*0.1),align : 'center'},
		              {field : 'operatorAId',title : '业务经办人A',width : parseInt($(this).width()*0.1),align : 'center'},
		              {field : 'operatorBId',title : '业务经办人B',width : parseInt($(this).width()*0.1),align : 'center'},
		              {field : 'loanReviewRommitteeName1',title : '贷审委A',width : parseInt($(this).width()*0.1),align : 'center'},
		              {field : 'loanReviewRommitteeName2',title : '贷审委B',width : parseInt($(this).width()*0.1),align : 'center'},
		              {field : 'loanReviewRommitteeName3',title : '贷审委C',width : parseInt($(this).width()*0.1),align : 'center'},
		              {field : 'salesMan',title : '业务员',width : parseInt($(this).width()*0.1),align : 'center'},
		              {field : 'teamManger',title : '团队经理',width : parseInt($(this).width()*0.1),align : 'center'},
		              {field : 'repaymentBgDate',title : '还款开始日期',width : parseInt($(this).width()*0.1),align : 'center'},
		              {field : 'repaymentEndDate',title : '还款截止日期',width : parseInt($(this).width()*0.1),align : 'center'},
		              {field : 'drawDate',title : '划扣日期',width : parseInt($(this).width()*0.1),align : 'center'},
		              {field : 'remark',title : '备注信息',width : parseInt($(this).width()*0.1),align : 'center'},
		              ] ]
	});
	
	loadOrganization();
});
	
	//获取所属地区
	function loadOrganization(){
		$("#organizationId").combobox({
			valueField : 'code',
			textField : 'text',
			url:"orgz/organizationAction!findOrganizationCombo.action",
		});
	}

	//提交查询表单
	function subLoanCractForm(){
		$("#loanContractInfoTab").datagrid({
			url : "loanContract/loanContractAction!findLoanContractInfo.action",
			queryParams:{"organizationId":$("#organizationId").combobox("getValue"),
						 "contractNo":$("#contractNo").val(),
						 "loanName":$("#loanName").val(),
						 "loanBgDateS":$("#loanBgDateS").datebox('getValue'),
						 "loanBgDateE":$("#loanBgDateE").datebox('getValue')
						}
		});
	}
	
	//重置查询表单
	function resetLoanCractForm(){
		$("#loanCractForm").form("clear");
	}
	
	//导出信贷合同明细
	function uploadLoanContract(){
		
	}
</script>
	</head>
<body>
	<div>
		<div style="margin-left: 5px;margin-top: 5px">
			业务管理-->财务监控管理-->贷款客户监管-->信贷合同信息
		</div>
		<div style="padding-top:5px;">
			<font size="3em">[查询条件]</font>
			<form id="loanCractForm" method="post">
				<table cellpadding="10px;">
					<tr>
						<th>
							所属地区
						</th>
						<td>
							<input id="organizationId" name="organizationId" class="easyui-textbox easyui-combobox" placeholder="请选择省份/直辖市/自治区"/>
						</td>
						
						<th>
							合同编号
						</th>
						<td>
							<input id="contractNo" name="contractNo" class="easyui-textbox"  placeholder="请输入合同编号"/>
						</td>
						
						<th>
							客户姓名
						</th>
						<td>
							<input id="loanName" name="loanName" class="easyui-textbox" placeholder="请输入客户姓名"/>
						</td>
						
						<th>
							合同签署日期
						</th>
						<td> 
							<input id="loanBgDateS" name="loanBgDateS" placeholder="请选择起始日期" class="easyui-textbox easyui-datebox" />
							　　至　　
							<input id="loanBgDateE" name="loanBgDateE" placeholder="请选择截止日期" class="easyui-textbox easyui-datebox" />
						</td>
					</tr>
				</table>
			</form>
			<div style="text-align:right;">
				<span style="color:red;float:left;padding-top:6px;">
					注:不输入任何查询条件，默认查询所有客户还款详情
				</span>
				<a href="javascript:void(0);" class="easyui-linkbutton" iconCls="icon-search" onclick="subLoanCractForm();">执行查询</a>
				<a href="javascript:void(0);" class="easyui-linkbutton" iconCls="icon-reload" onclick="resetLoanCractForm();">重置条件</a>
				<a href="javascript:void(0);" class="easyui-linkbutton" iconCls="icon-search" onclick="uploadLoanContract();">导出信贷合同明细</a>
			</div>
		</div>
		<div>
			<table id="loanContractInfoTab"></table>
		</div>
	</div>
	</body>
	</html>
					
