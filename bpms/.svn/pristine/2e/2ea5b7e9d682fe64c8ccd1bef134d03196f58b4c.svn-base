<%@ page language="java" import="java.util.*" pageEncoding="UTF-8"%>
<script type="text/javascript" src="js/validate.js"></script>

<script type="text/javascript">		
	$(function(){
		//加载页面时，初始化还款方式下拉列表
		$('#repaymentMode').combobox({    			    
			url:"common/commonAction!findTextArr.action?codeMyid=repayment_mode",
			valueField: 'code',
			textField: 'text'			    			    
		});
		
		//加载页面时，初始化还产品状态列表
		$('#prodStatus').combobox({    			    
			url:"common/commonAction!findTextArr.action?codeMyid=prod_status",
			valueField: 'code',
			textField: 'text'			    			    
		});		
		
	});		
			
	
	/** 清空新添加的理财产品的的数据**/
	function clearForm(){
		$("#investProductInputOrSaveForm").form("clear");		
	}	
	
	
	/** 增加或者修改理财产品的数据**/
	function saveInvestProductInfo(){
		//校验理财产品输入的信息
   		var isValid = $("#investProductInputOrSaveForm").form('validate');
   		console.info("isValid = "+isValid);
    	if(!isValid){
    		return false;
    	} 
    	    	
    	$.ajax({
    		type: "POST",
    		url:"investProduct/investProductAction!persistenceInvestProduct.action",
    		data:$('#investProductInputOrSaveForm').serialize(),
    		async: false,//默认true设置下，所有请求均为异步请求
    		cache: true,
    	    success: function(iJson) {
    	    	console.info("保存后，标志是否保存成功的状态："+iJson.status);
     	    	if(iJson.status){
    	    		$("#prodId").val(iJson.data);//保存成功保存投资人id
    	    		/* disableForm();//禁用form */
    	    	}
    	    	parent.$.messager.show({
    				title : '提示',
    				msg : iJson.message,
    				timeout : 4000 * 2
    			}); 
    	    }
    	});
		
	}
	
	
</script>

<div data-options="region:'center',border : false">
	
	<div class="well well-small" style="margin-left: 5px;margin-top: 5px; width: 850px;">
	   <form id="investProductInputOrSaveForm" method="post">
	   		<input id="prodId" name="prodId" type="hidden"/><!--理财产品的ID -->
			<table class="table" width="80%">
				<tr>
					<th>产品名称:</th>
					<td>
						<input id="prodName" name="prodName" class="easyui-textbox easyui-validatebox" data-options="validType:'length[0,100]', required:true"/>
					</td>
				    <th>出借周期(天):</th>
					<td><input id="lendingCycle" name="lendingCycle" type="text" class="easyui-textbox easyui-validatebox" data-options="validType:'integer',required:true"/></td>
				</tr>
				<tr>
					<th>年化收益率:</th>
					<td>
						<input id="ars" name="ars" type="text" class="easyui-textbox easyui-validatebox" data-options="validType:'intOrFloat',required:true"/>%
					</td>
					
					<th>到期收益率:</th>						
					<td>
						<input id="ytm" name="ytm" type="text" class="easyui-textbox easyui-validatebox" data-options="validType:'intOrFloat',required:true"/>%
					</td>
				</tr>
				<tr>
					<th>最低出借金额(元):</th>
					<td>
						<input id="lowLendEdu" name="lowLendEdu" type="text" class="easyui-textbox easyui-validatebox" data-options="validType:'intOrFloat',required:true"/>
					</td>
					<th>最高出借金额(元):</th>
					<td>
						<input id="higLendEdu" name="higLendEdu" type="text" class="easyui-textbox easyui-validatebox" data-options="validType:'intOrFloat'"/>
					</td>
				</tr>
				<tr>
					<th>还款方式:</th>
					<td><input id="repaymentMode" name="repaymentMode" class="easyui-combobox easyui-validatebox"/></td>
					
					<th>产品状态:</th>
					<td><input id="prodStatus" name="prodStatus" class="easyui-combobox easyui-validatebox"/></td>														
				</tr>
				<tr>
				    <th>产品描述:</th>
				    <td>
				       <input name="prodDesc" class="easyui-textbox" data-options="validType:'length[0,100]'"/>
				    </td>
				</tr>
				
				<tr>
				   <td colspan="4" align="right">
				      <a href="javascript:void(0)" id="rset" class="easyui-linkbutton" iconCls="icon-reload" onclick="clearForm();">重置</a>
				      <a href="javascript:void(0)" id="save" class="easyui-linkbutton" iconCls="icon-save" onclick="saveInvestProductInfo();">保存</a>
				   </td>
				</tr>					
			</table>
		</form>
       </div>				
</div>
