<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<style>
.easyui-textbox {
	height: 18px;
	width: 170px;
	line-height: 16px;
	/*border-radius: 3px 3px 3px 3px;*/
	box-shadow: 0 1px 1px rgba(0, 0, 0, 0.075) inset;
	transition: border 0.2s linear 0s, box-shadow 0.2s linear 0s;
}
textarea:focus, input[type="text"]:focus {
	border-color: rgba(82, 168, 236, 0.8);
	box-shadow: 0 1px 1px rgba(0, 0, 0, 0.075) inset, 0 0 8px
		rgba(82, 168, 236, 0.6);
	outline: 0 none;
}
input, textarea {
	font-weight: normal;
}
.easyui-aa{
}
.table {
	background-color: transparent;
	border-collapse: collapse;
	border-spacing: 0;
	max-width: 100%;
}

.table {
	text-align: left;
	padding: 6px 10px 6px 10px;
}

.table th {
	text-align: right;
	padding: 6px 10px 6px 10px;
}
.table td {
    text-align: left;
	padding: 6px 10px 6px 10px;
}
</style>
<script type="text/javascript">
var provinceArr = jqueryUtil.getAreaTextArr(1);//获取省
var relationshipArr = jqueryUtil.getTextArr("relationship_type"); //与本人关系
var accountMediumArr = jqueryUtil.getTextArr("account_medium"); //账户介质
var bankAccountTypeArr = jqueryUtil.getTextArr("bankAccount_type"); //账户性质
var attempData;
$(function(){
	//获取附件类型combobox,并将数据保存 
	$("#upload_form_divs input:first").combobox({
		valueField : 'code',
		textField : 'text',
		url:'common/commonAction!findTextArr.action?codeMyid=attachment_type',
		onLoadSuccess : function(){
			attempData = $("#upload_form_divs input:first").combobox("getData");
                var val = $(this).combobox("getData");
                for (var item in val[0]) {
                    if (item == "code") {
                        $(this).combobox("select", val[0][item]);
                    }
                }
		},
		editable:false ,
	});
	//上传附件所需订单ID 
	var loanerId = $("#loanOrderId").val();
	loadAttachmentList('attachmentList','noauditId',loanerId);
	
	$("#LinkPeopleForm :input").attr("readonly","readonly");
	$("#dwform :input").attr("readonly","readonly");
	$("#loanInfo :input").attr("readonly","readonly");
	$("#bankForm :input").attr("readonly","readonly");
	
	RenderCombox();
	
	$("#tt").tabs({
		 onSelect:function(title,index){
			 if(1==index){
				//紧急联系人列表
				 linkPeopleDatagrid($paramRow);
				 $("#LinkPeopleForm :input").removeAttr("readonly");
			 }else if(2==index){
				//工作单位列表
				initDatagrid($paramRow);
				$("#dwform :input").removeAttr("readonly");
			 }else if(3==index){
				//$("#loanInfo").form('clear');
				//申请贷款信息
				$.ajax({
					url : 'loanOrder/loanOrderAction!queryLoanOrderById.action',
					type : 'POST',
					data : 'loanOrderId=' + $paramRow.loanOrderId,
					async : false,
					dataType : 'JSON',
					success : function(iJson) {
						if(iJson.loanAmount){
							$("#loanInfo").form('load', iJson);
						}
					}
				});
				$("#loanInfo :input").removeAttr("readonly");
			 }else if(4==index){
				//开户行列表
				initBankGrid($paramRow);
				$("#bankForm :input").removeAttr("readonly");
			 }else if(5==index){
				//附件信息
				loadAttachmentList('attachmentList','noauditId',$paramRow.loanOrderId);
			 } else if(6==index){
				//$("#loanerJointForm").form("clear");
				//渲染共同借款人的信息
				loadLoanerJoint();
			 }
		 }
	});
})

// 渲染共同借款人的信息
function loadLoanerJoint(){
	 $.ajax({
			type:"POST",
			url: 'loanerJoint/loanerJointAction!findLoanerJointByOrderId.action?loanOrderId='+$paramRow.loanOrderId,
			dataType:"json",
			success:function(iJson){
				if(iJson==null){
				   //渲染共同贷款人户籍地址
				   renderProvinceSelect("residenceProvinceId","residenceCityId","residenceAreaId");
				   //渲染共同贷款人的当前地址
				   renderProvinceSelect("ljCurProvinceId","ljCurCityId","ljCurAreaId");
				   //渲染共同贷款人的单位地址
				   renderProvinceSelect("corpProvinceId","corpCityId","corpAreaId");
					return;
				}else{
				   	$("#loanerJointForm").form("load",iJson);
				   //渲染共同贷款人户籍地址
				   renderProvinceSelect("residenceProvinceId","residenceCityId","residenceAreaId");
				   //渲染共同贷款人的当前地址
				   renderProvinceSelect("ljCurProvinceId","ljCurCityId","ljCurAreaId");
				   //渲染共同贷款人的单位地址
				   renderProvinceSelect("corpProvinceId","corpCityId","corpAreaId");
					$("#residenceProvinceId").combobox("setValue",iJson.residenceProvinceId);
			        $("#residenceCityId").combobox("setValue",iJson.residenceCityId);
			        $("#residenceAreaId").combobox("setValue",iJson.residenceAreaId); 
			        $("#ljCurProvinceId").combobox("setValue",iJson.curProvinceId);
			        $("#ljCurCityId").combobox("setValue",iJson.curCityId);
			        $("#ljCurAreaId").combobox("setValue",iJson.curAreaId);	
			        $("#corpProvinceId").combobox("setValue",iJson.corpProvinceId);
			        $("#corpCityId").combobox("setValue",iJson.corpCityId);
			        $("#corpAreaId").combobox("setValue",iJson.corpAreaId); 
				}
			}
	 });
}

function RenderCombox(){
	   //性别
	   $("input[name^='gender']").combobox({
			url : "common/commonAction!findTextArr.action?codeMyid=gender_type",
			valueField : 'code',
			textField : 'text',
			required : true,
			onLoadSuccess : function(){
                var val = $(this).combobox("getData");
                for (var item in val[0]) {
                    if (item == "code") {
                        $(this).combobox("select", val[0][item]);
                    }
                }
			}
	   });
	   //婚姻状况
	   $("input[name='marriageType']").combobox({
			url:"common/commonAction!findTextArr.action?codeMyid=marriage_type",
			valueField: 'code',
			textField: 'text',
			required : true,
			onLoadSuccess : function(){
	            var val = $(this).combobox("getData");
	            for (var item in val[0]) {
	                if (item == "code") {
	                    $(this).combobox("select", val[0][item]);
	                }
	            }
			}
	   });
	   //是否有子女
	   $("input[name$='hasChild']").combobox({
			url:"common/commonAction!findTextArr.action?codeMyid=has_child",
			valueField: 'code',
			textField: 'text',
			required : true,
			onLoadSuccess : function(){
	            var val = $(this).combobox("getData");
	            for (var item in val[0]) {
	                if (item == "code") {
	                    $(this).combobox("select", val[0][item]);
	                }
	            }
			}
		});
	   //房屋居住情况
	   $("input[name$='mortgageStatus']").combobox({
			url:"common/commonAction!findTextArr.action?codeMyid=mortgage_status",
			valueField: 'code',
			textField: 'text',
			required : true,
			onLoadSuccess : function(){
	            var val = $(this).combobox("getData");
	            for (var item in val[0]) {
	                if (item == "code") {
	                    $(this).combobox("select", val[0][item]);
	                }
	            }
			}
		});
	   //与本人关系
	   $("input[name$='relationship']").combobox({
			url:"common/commonAction!findTextArr.action?codeMyid=relationship_type",
			valueField: 'code',
			textField: 'text',
			required : true,
			onLoadSuccess : function(){
	            var val = $(this).combobox("getData");
	            for (var item in val[0]) {
	                if (item == "code") {
	                    $(this).combobox("select", val[0][item]);
	                }
	            }
			}
		});
	    //还款方式
	   $("input[name$='repayMethod']").combobox({
			url:"common/commonAction!findTextArr.action?codeMyid=repay_method",
			valueField: 'code',
			textField: 'text',
			required : true,
	   });
	   //贷款类型
	   $("input[name$='loanType']").combobox({
			url:"common/commonAction!findTextArr.action?codeMyid=loan_type",
			valueField: 'code',
			textField: 'text',
			required : true,
			onLoadSuccess : function(){
	            var val = $(this).combobox("getData");
	            for (var item in val[0]) {
	                if (item == "code") {
                   		$(this).combobox("select", val[0][item]);
                	}
            	}
			}
	   });
	   //账户介质
	   $("input[name$='actMedium']").combobox({
			url:"common/commonAction!findTextArr.action?codeMyid=account_medium",
			valueField: 'code',
			textField: 'text',
			required : true,
			onLoadSuccess : function(){
	            var val = $(this).combobox("getData");
	            for (var item in val[0]) {
	                if (item == "code") {
	                    $(this).combobox("select", val[0][item]);
                   }
            	}
			}
	   });
	   //账户性质
	   $("input[name$='actNature']").combobox({
			url:"common/commonAction!findTextArr.action?codeMyid=bankAccount_type",
			valueField: 'code',
			textField: 'text',
			required : true,
			onLoadSuccess : function(){
	            var val = $(this).combobox("getData");
	            for (var item in val[0]) {
	                if (item == "code") {
	                    $(this).combobox("select", val[0][item]);
                	}
          	  }
			}
	   });
		
	   // 单位性质
	    $("input[name='corpNature']").combobox({
			url:"common/commonAction!findTextArr.action?codeMyid=corp_nature",
			valueField: 'code',
			textField: 'text',
			required : true,
			onLoadSuccess : function(){
                var val = $(this).combobox("getData");
                for (var item in val[0]) {
                    if (item == "code") {
                        $(this).combobox("select", val[0][item]);
                    }
                }
			}
	   });  
	   
	   //紧急联系家庭地址
	   renderProvinceSelect('familyProvince', 'familyCity', 'familyArea');
	   //紧急联系人单位地址
	   renderProvinceSelect('compProvince', 'compCity', 'compArea');
	   //工作单位
	   renderProvinceSelect('dwProvince', 'dwCity', 'dwArea');
   }
//省
function renderProvinceSelect(pid,cid,aid){
	 $.ajax({
		type:"POST",
		url:'common/commonAction!findAreaDic.action?parentId=1',
		dataType:"JSON",
		async:false,
		success:function(iJson){
			var arr = eval(iJson);
			$('#'+pid).combobox({   
				data:arr,
	            valueField:'code',   
	            textField:'text',
	            editable:false,
	            onLoadSuccess:function(){
	            	var indexOneVal = $("#"+pid).combobox("getValue");//获取一级栏目值
					if(indexOneVal != null && indexOneVal != ""){
						//渲染二级栏目下拉框
						renderCitySelect(cid,aid,indexOneVal);
		            }
	            },
	            onChange:function(newvalue,oldvalue){
	                //渲染二级栏目下拉框
	            	renderCitySelect(cid,aid,newvalue);
	            	$("#"+cid).combobox("setValue","");
	            	$("#"+aid).combobox("setValue","");
				}
	        }); 
		}
	}); 
}
//市
function renderCitySelect(cid,aid,pvalue){
     $.ajax({
		type:"POST",
		url: 'common/commonAction!findAreaDic.action?parentId='+pvalue,
		dataType:"json",
		async:false,
		success:function(iJson){
			var arr = eval(iJson);
			$('#'+cid).combobox({   
				data:arr,
	            valueField:'code',   
	            textField:'text',
	            editable:false,
	            onLoadSuccess:function(){
					var indexTwoVal = $("#"+cid).combobox("getValue");//获取二级栏目已选择的值
					if(indexTwoVal != null && indexTwoVal != ""){
						renderAreaSelect(aid,indexTwoVal);
					}
                },
	            onChange:function(newvalue,oldvalue){
	            	renderAreaSelect(aid,newvalue);
	            	$("#"+aid).combobox("setValue","");
				}
	        }); 
		}
	}); 
}
//县
function renderAreaSelect(aid,cvalue){
     $.ajax({
		type:"POST",
		url: 'common/commonAction!findAreaDic.action?parentId='+cvalue,
		dataType:"json",
		async:false,
		success:function(iJson){
			var arr = eval(iJson);
			$('#'+aid).combobox({   
				data:arr,
	            valueField:'code',   
	            textField:'text',
	            editable:false
	        }); 
		}
	}); 
}
//基本信息保存
function toSaveBaseInfo(idh,ids){
	var isValid = $("#baseForm").form('validate');
	if(!isValid){
		return false;
	}
	$.ajax({
		cache:true,
		type:'POST',
		url:'loaner/loanerAction!persistenceLoaner.action',
		data:$('#baseForm').serialize(),
		async:false,
		dataType:'JSON',
		success:function(res){
			if(res.state){//保存成功
				$("#sign").val("save");
			    //表单禁用
				disableForm();
				parent.$.messager.show({
					title : '提示',
					msg : "恭喜你,保存成功!",
					timeout : 4000 * 2
				});
			}else{
				parent.$.messager.show({
					title : '提示',
					msg : "出错了,保存失败!",
					timeout : 4000 * 2
				});
			}
			
		}
	});
}
//表单禁用
function disableForm(){
	$("#save").hide();//保存按钮影藏
	$("#edit").show();//修改按钮显示出来
	$("#rset").hide();//重置按钮隐藏
	var  myArrays=$("#baseForm input[class^='easyui-']");
	console.info(myArrays);
    for(var i = 0;i<myArrays.length;i++){
       if($(myArrays[i]).hasClass("easyui-aa")){
     	   $(myArrays[i]).combobox("disable");
       }else if($(myArrays[i]).hasClass("easyui-combotree")){
   		   $(myArrays[i]).combotree("disable");
   	   }else if($(myArrays[i]).hasClass("easyui-combogrid")){
   		   $(myArrays[i]).combogrid("disable");
   	   }else if($(myArrays[i]).hasClass("easyui-combobox")){
   		   $(myArrays[i]).combobox("disable");
   	   }else if ($(myArrays[i]).hasClass("easyui-textbox")){
  		   $(myArrays[i]).attr("disabled",true);
  	   }else{
  	   }
     }
}
//点击修改,表单放开
function ableForm(){
	$("#edit").hide();//修改按钮影藏
	$("#save").show();//保存按钮显示出来
	$("#rset").show();
	var  myArrays=$("#baseForm input[class^='easyui-']");
	console.info(myArrays);
    for(var i = 0;i<myArrays.length;i++){
       if($(myArrays[i]).hasClass("easyui-aa")){
    	   $(myArrays[i]).combobox("enable");
       }else if($(myArrays[i]).hasClass("easyui-combotree")){
   		   $(myArrays[i]).combotree("enable");
   	   }else if($(myArrays[i]).hasClass("easyui-combogrid")){
   		   $(myArrays[i]).combogrid("enable");
   	   }else if($(myArrays[i]).hasClass("easyui-combobox")){
   		   $(myArrays[i]).combobox("enable");
   	   }else if ($(myArrays[i]).hasClass("easyui-textbox")){
  		   $(myArrays[i]).attr("disabled",false);
  	   }else{
  	   }
     }
}
//新增紧急联系人
function toSaveLinkPeople(){
	//表单校验
	var isValid = $("#LinkPeopleForm").form('validate');
	if(!isValid){
		return false;
	}
	//贷款人客户id
	var $loanerId = $("#loanerId").val();
	$("#cusId").val($loanerId);
	//发送请求保存紧急联系人
	$.ajax({
		cache: true,
		type: "POST",
		url:"contacts/contactsAction!saveContacts.action",
		data:$('#LinkPeopleForm').serialize(),
		async: false,
	    error: function(request) {
	        alert("Connection error");
	    },
	    success: function(res) {
	    	if(res.status){
	    		$("#LinkPeopleForm").form('clear');
	    		$("#LinkPeopleForm input[name='idType']").val("A");
		    	$("#linkPeople").datagrid("reload");
	    	}
	    	parent.$.messager.show({
				title : '提示',
				msg : res.message,
				timeout : 4000 * 2
			});
	    }
	});
}
//编辑紧急联系人
function doEdit(){
	var row = $("#linkPeople").datagrid("getSelected");
	var rows = $('#linkPeople').datagrid('getSelections');
	if (row == null) {
		$.messager.alert("提示", "请选择一条记录进行编辑!", "warning");
		return;
	}
	if(rows.length >1){
		$.messager.alert("提示", "您只能选择一条记录执行编辑!", "warning");
		return;
	}
	//获取订单id
	var $loanOrderId = $("#loanOrderId").val();
	$.ajax( {
		type : "POST",
		url : 'contacts/contactsAction!doEdit.action',
		data : "contactId="+row.contactId+"&loanOrderId="+$loanOrderId,
		dataType:'JSON',
		success : function(iJson) {
			var res = JSON.parse(iJson);
			if(res.state){
				$("#LinkPeopleForm").form('load',row);
				renderProvinceSelect("compProvince","compCity","compArea");
			    renderProvinceSelect("familyProvince","familyCity","familyArea");
				$("#compProvince").combobox("setValue",row.compProvince);
				$("#compCity").combobox("setValue",row.compCity);
				$("#compArea").combobox("setValue",row.compArea);
				
				$("#familyProvince").combobox("setValue",row.familyProvince);
				$("#familyCity").combobox("setValue",row.familyCity);
				$("#familyArea").combobox("setValue",row.familyArea);
			}else{
				parent.$.messager.show({
					title : '提示',
					msg : res.msg,
					timeout : 4000 * 2
				});
			}
		}
	}); 
}
//紧急联系人删除
function doDelete(){
	//获取订单id
	var $loanOrderId = $("#loanOrderId").val();
	var rows = $('#linkPeople').datagrid('getSelections');
	if (rows.length <= 0) {
		$.messager.alert("提示", "请至少选择一条记录执行删除!", "warning");
		return;
	}
	var ids = new Array();
	for(var i=0,len=rows.length; i<len; i++){
		ids.push(rows[i].contactId);
	}
	ids = ids.join(",");
	$.messager.confirm('删除', '执行删除后，数据将不可恢复,是否执行?', function(d) {
		if (d) {
			$.ajax( {
				type : "POST",
				url : 'contacts/contactsAction!doDeleteById.action',
				data : "contactIds="+ids+"&loanOrderId="+$loanOrderId,
				dataType:'JSON',
				success : function(iJson) {
					var res = JSON.parse(iJson);
					if(res.state){
						$.each(rows,function(i,row){
							if (row) {
								var rowIndex = $('#linkPeople').datagrid('getRowIndex', row);
								$('#linkPeople').datagrid('deleteRow', rowIndex);
							}
					    });
					}
					parent.$.messager.show({
						title : '提示',
						msg : res.msg,
						timeout : 4000 * 2
					});
				}
			});
		}
	});
}
//选择紧急联系人，作为本次借款的联系人
function doSave(){
	//订单id
	var $loanOrderId = $("#loanOrderId").val();
	var row = $("#linkPeople").datagrid("getSelected");
	var rows = $('#linkPeople').datagrid('getSelections');
	if (row == null) {
		$.messager.alert("提示", "请至少勾选一个联系人作为本次借款的紧急联系人!", "warning");
		return;
	}
	var ids = new Array();
	for(var i=0;i<rows.length;i++){
		ids.push(rows[i].contactId);
	}
	ids=ids.join(","); 
	$.ajax( {
		type : "POST",
		url : 'loanorderAndContacts/loanorderAndContactsAction!saveLoanorderAndContacts.action',
		data: "contactIds="+ids+"&loanOrderId="+$loanOrderId,
		dataType:'json',
		success : function(iJson) {
			var res = JSON.parse(iJson);
			parent.$.messager.show({
				title : '提示',
				msg : res.msg,
				timeout : 4000 * 2
			});
		}
	});
}
//新增保存单位
function toSaveDw(){
	var isValid = $("#dwform").form('validate');
	if(!isValid){
		return false;
	}
	//贷款人客户id
	var $loanerId = $("#loanerId").val();
	//发送请求保存紧急联系人
	$.ajax({
		cache: true,
		type: "POST",
		url:"company/companyAction!saveCompany.action?loanerId="+$loanerId,
		data:$('#dwform').serialize(),
		async: false,
	    error: function(request) {
	        alert("Connection error");
	    },
	    success: function(iJson) {
	    	var res = JSON.parse(iJson);
			if(res.state){
				$("#dwDatagrid").datagrid('reload');//刷新列表
				$('#dwform').form('clear');//清空form表单
			}
			parent.$.messager.show({
				title : '提示',
				msg : res.msg,
				timeout : 4000 * 2
			});
	    }
	});
}
//编辑
function doEditDw(){
	var row = $("#dwDatagrid").datagrid("getSelected");
	var rows = $('#dwDatagrid').datagrid('getSelections');
	if (row == null) {
		$.messager.alert("提示", "请选择一条记录进行编辑!", "warning");
		return;
	}
	if(rows.length >1){
		$.messager.alert("提示", "您只能选择一条记录执行编辑!", "warning");
		return;
	}
	//获取订单id
	var $loanOrderId = $("#loanOrderId").val();
	$.ajax( {
		type : "POST",
		url : 'company/companyAction!doEdit.action',
		data : "comId="+row.comId+"&loanOrderId="+$loanOrderId,
		dataType:'JSON',
		success : function(iJson) {
			console.info(iJson);
			var res = JSON.parse(iJson);
			if(res.state){
				$("#dwform").form('load',row);
				renderProvinceSelect('dwProvince', 'dwCity', 'dwArea');
				$("#dwProvince").combobox('setValue',row.dwProvince);
				$("#dwCity").combobox('setValue',row.dwCity);
				$("#dwArea").combobox('setValue',row.dwArea);
			}else{
				parent.$.messager.show({
					title : '提示',
					msg : res.msg,
					timeout : 4000 * 2
				});
			}
		}
	});
}
//删除
function doDeleteDw(){
	//获取订单id
	var $loanOrderId = $("#loanOrderId").val();
	var rows = $('#dwDatagrid').datagrid('getSelections');
	if (rows.length <= 0) {
		$.messager.alert("提示", "请至少选择一条记录执行删除!", "warning");
		return;
	}
	var ids = new Array();
	for(var i=0,len=rows.length; i<len; i++){
		ids.push(rows[i].comId);
	}
	ids = ids.join(",");
	$.messager.confirm('删除', '执行删除后，数据将不可恢复,是否执行?', function(d) {
		if (d) {
			$.ajax( {
				type : "POST",
				url : 'company/companyAction!doDeleteById.action',
				data : "comIds="+ids+"&loanOrderId="+$loanOrderId,
				dataType:'JSON',
				success : function(iJson) {
					var res = JSON.parse(iJson);
					if(res.state){
						$.each(rows,function(i,row){
							if (row) {
								var rowIndex = $('#dwDatagrid').datagrid('getRowIndex', row);
								$('#dwDatagrid').datagrid('deleteRow', rowIndex);
							}
					    }); 
					}
					parent.$.messager.show({
						title : '提示',
						msg : res.msg,
						timeout : 4000 * 2
					});
				}
			});
		}
	});
}
//保存订单与工作单位关系
function doSaveDw(){
	//订单id
	var $loanOrderId = $("#loanOrderId").val();
	var row = $("#dwDatagrid").datagrid("getSelected");
	var rows = $('#dwDatagrid').datagrid('getSelections');
	if (row == null) {
		$.messager.alert("提示", "请至少勾选一条记录作为本次借款的工作单位!", "warning");
		return;
	}
	var ids = new Array();
	for(var i=0;i<rows.length;i++){
		ids.push(rows[i].comId);
	}
	ids=ids.join(","); 
	$.ajax( {
		type : "POST",
		url : 'loanorderAndCompany/loanorderAndCompanyAction!saveLoanorderAndCompany.action',
		data: "comIds="+ids+"&loanOrderId="+$loanOrderId,
		dataType:'json',
		success : function(iJson) {
			var res = JSON.parse(iJson);
			parent.$.messager.show({
				title : '提示',
				msg : res.msg,
				timeout : 4000 * 2
			});
		}
	});
}
//申请贷款信息
function toSaveLoanInfo(){
	var isValid = $("#loanInfo").form('validate');
	if(!isValid){
		return false;
	}
	//订单id
	var $loanOrderId = $("#loanOrderId").val();
	$.ajax({
		cache: true,
		type: "POST",
		url:"loanOrder/loanOrderAction!saveLoanInfo.action?loanOrderId="+$loanOrderId,
		data:$('#loanInfo').serialize(),
		async: false,
	    error: function(request) {
	        alert("Connection error");
	    },
	    success: function(iJson) {
	    	var res = JSON.parse(iJson);
	    	if(res.state){
	    		$("#saveinfo").hide();//保存按钮消失
	    		$("#editinfo").show();//修改按钮出现
	    		//如果保存成功则表单禁用
	    		$("#loanInfo textarea").attr("disabled",true);
	    		var arr = $("#loanInfo input[class^='easyui-']");
	    		console.info(arr);
	    		for (var i = 0; i < arr.length; i++) {
	    			if($(arr[i]).hasClass("easyui-aa")){
	    		  		$(arr[i]).combobox("disable");
	    		  	}else if($(arr[i]).hasClass("easyui-textbox")){
	    		  		$(arr[i]).attr("disabled",true);
	    		  	}else{
	    		  	}
				}
	    	}
	    	parent.$.messager.show({
				title : '提示',
				msg : res.msg,
				timeout : 4000 * 2
			});
	    }
	});
}
//申请贷款信息编辑按钮
function showSavebut(){
	$("#editinfo").hide();
	$("#saveinfo").show();
	//如果保存成功则表单禁用
	$("#loanInfo textarea").attr("disabled",false);
	var arr = $("#loanInfo input[class^='easyui-']");
	for (var i = 0; i < arr.length; i++) {
		if($(arr[i]).hasClass("easyui-aa")){
	  		$(arr[i]).combobox("enable");
	  	}else if($(arr[i]).hasClass("easyui-textbox")){
	  		$(arr[i]).attr("disabled",false);
	  	}else{
	  	}
	}
}
//保存开户行信息
function toSaveBankInfo(){
	var isValid = $("#bankForm").form('validate');
	if(!isValid){
		return false;
	}
	//贷款人客户id
	var $loanerId = $("#loanerId").val();
	$("#bankCusId").val($loanerId);
	//发送请求保存紧急联系人
	$.ajax({
		cache: true,
		type: "POST",
		url:"accountInfo/accountInfoAction!saveAccountInfo.action",
		data:$('#bankForm').serialize(),
		async: false,
	    error: function(request) {
	        alert("Connection error");
	    },
	    success: function(res) {
	    	if(res.status){
	    		$("#bankForm").form('clear');
		    	$("#bankGrid").datagrid("reload");
	    	}
	    	parent.$.messager.show({
				title : '提示',
				msg : res.message,
				timeout : 4000 * 2
			});
	    }
	});
}
//编辑
function doEditBank(){
	var row = $("#bankGrid").datagrid("getSelected");
	var rows = $('#bankGrid').datagrid('getSelections');
	if (row == null) {
		$.messager.alert("提示", "请选择一条记录进行编辑!", "warning");
		return;
	}
	if(rows.length >1){
		$.messager.alert("提示", "您只能选择一条记录执行编辑!", "warning");
		return;
	}
	//获取订单id
	var $loanOrderId = $("#loanOrderId").val();
	$.ajax( {
		type : "POST",
		url : 'accountInfo/accountInfoAction!doEditAccountInfo.action',
		data : "accountId="+row.accountId+"&loanOrderId="+$loanOrderId,
		dataType:'JSON',
		success : function(iJson) {
			console.info(iJson);
			var res = JSON.parse(iJson);
			if(res.state){
				$("#bankForm").form('load',row);
			}else{
				parent.$.messager.show({
					title : '提示',
					msg : res.msg,
					timeout : 4000 * 2
				});
			}
		}
	});
}
//删除
function doDeleteBank(){
	//获取订单id
	var $loanOrderId = $("#loanOrderId").val();
	var rows = $('#bankGrid').datagrid('getSelections');
	if (rows.length <= 0) {
		$.messager.alert("提示", "请至少选择一条记录执行删除!", "warning");
		return;
	}
	var ids = new Array();
	for(var i=0,len=rows.length; i<len; i++){
		ids.push(rows[i].accountId);
	}
	ids = ids.join(",");
	$.messager.confirm('删除', '执行删除后，数据将不可恢复,是否执行?', function(d) {
		if (d) {
			$.ajax( {
				type : "POST",
				url : 'accountInfo/accountInfoAction!doDeleteById.action',
				data : "accountIds="+ids+"&loanOrderId="+$loanOrderId,
				dataType:'JSON',
				success : function(iJson) {
					console.info(iJson);
					var res = JSON.parse(iJson);
					if(res.state){
						//刷新列表
						$("#bankGrid").datagrid("reload");
					}
					parent.$.messager.show({
						title : '提示',
						msg : res.msg,
						timeout : 4000 * 2
					});
				}
			});
		}
	});
}
//保存订单与开户行的关系
function doSaveBank(){
	//订单id
	var $loanOrderId = $("#loanOrderId").val();
	var row = $("#bankGrid").datagrid("getSelected");
	var rows = $('#bankGrid').datagrid('getSelections');
	if (row == null) {
		$.messager.alert("提示", "请至少勾选一个联系人作为本次借款的紧急联系人!", "warning");
		return;
	}
	var ids = new Array();
	for(var i=0;i<rows.length;i++){
		ids.push(rows[i].accountId);
	}
	ids=ids.join(","); 
	$.ajax( {
		type : "POST",
		url : 'accountInfo/accountInfoAction!saveAccountInfoActionLoanOrder.action',
		data: "accountIds="+ids+"&loanOrderId="+$loanOrderId,
		dataType:'json',
		success : function(iJson) {
			var res = JSON.parse(iJson);
			parent.$.messager.show({
				title : '提示',
				msg : res.msg,
				timeout : 4000 * 2
			});
		}
	});
}
	
function checkOrderID(obj){
	 var loanerOrderId = $("#loanOrderId").val();
	 if(""==loanerOrderId){
		 $.messager.alert("提示","请您填写客户基本资料并保存!","warning");
		 return false;
	 }else{
		 //上传附件所需订单ID
	     fileUploads(obj,loanerOrderId);
	 }
	
	 
  }


// 清理表单信息
function clearFun(id){
	   $("#"+id).form("clear");
}


// 保存共同贷款人的信息
function saveLoanerJoint(){
	   var isValid = $("#loanerJointForm").form('validate');
		if(!isValid){
			return false;
		}
		// 设置订单ID
		$("#loanerJointForm input[name='loanOrderId']").val($("#loanOrderId").val());
		$.ajax({
			type:'POST',
			url:'loanerJoint/loanerJointAction!persistenceLoanerJoint.action',
			data:$('#loanerJointForm').serialize(),
			success:function(iJson){
				if(iJson.status){
					$.messager.show({
						title:iJson.title,
						msg:iJson.message,
						timeout:5000,
						showType:'slide'
					});
				}else{
					$.messager.alert("提示","修改失败！！","error");
				}
			}			
		});
}
</script>
<div class="easyui-layout" data-options="fit:true,border:false">
	<div data-options="region:'center',border:false" title="">
		<div id="tt">
			<div title="客户基本资料" data-options="iconCls:'icon-cstbase'"
				style="padding: 10px">
				<div class="well well-small" style="margin-left: 5px;margin-top: 5px;width: 850px;">
				   <form id="baseForm" method="post">
						<input id="loanerId" name="loanerId" type="hidden"/><!-- 贷款人id -->
						<input id="loanOrderId" name="loanOrderId" type="hidden"/><!-- 订单id -->
						<input id="createDate" name="createDate" type="hidden"/> <!-- 创建时间 -->
						<input id="sign" type="hidden" value="edit"/><!-- 修改or保存状态标志 -->
						<table class="table">
						   <tr>
								<th>姓名:</th>
								<td><input id="name" name="name"
									class="easyui-textbox easyui-validatebox"
									type="text" data-options="required:true,validType:'length[0,100]'"/></td>
							     <th>身份证号:</th>
								<td><input id="idNo" name="idNo" type="text"
									class="easyui-textbox" readonly="readonly"/></td>
								<th>性别:</th>
								<td><input name="genderType" type="text" class="easyui-textbox easyui-validatebox easyui-aa" editable='false' panelHeight="auto"/></td> 
							</tr>
							<tr>
								<th>手机:</th>
								<td><input id="mobileTel" name="mobileTel" type="text"
									class="easyui-textbox easyui-validatebox" data-options="required:true,validType:'mobile'"/></td>
								<th>住址电话:</th>
								<td><input id="fixedTel" name="fixedTel" type="text"
									class="easyui-textbox easyui-validatebox" data-options="required:true,validType:'phone'"/></td>
								<th>家庭电话:</th>
								<td><input id="familyTel" name="familyTel" type="text"
									class="easyui-textbox easyui-validatebox" data-options="required:true,validType:'phone'"/></td>
							</tr>
							<tr>
								<th>年龄:</th>
								<td><input id="age" name="age" type="text"
									class="easyui-textbox easyui-validatebox" data-options="required:true,validType:'age'"/></td>
								<th>婚姻状况:</th>
								<td><input id="marriageType" name="marriageType"
									type="text" class="easyui-textbox easyui-validatebox easyui-aa" editable='false' panelHeight="auto"/></td>
								<th>有无子女:</th>
								<td><input id="hasChild" name="hasChild" class="easyui-textbox easyui-validatebox easyui-aa"type="text" editable='false' panelHeight="auto"/></td>
							</tr>
							<tr>
								<th>年收入(元):</th>
								<td><input id="annualSalary" name="annualSalary"
									type="text" class="easyui-textbox easyui-validatebox" data-options="required:true,validType:'mDouble'"/></td>
								<th>收入来源:</th>
								<td><input id="incomeSrc" name="incomeSrc" type="text"
									class="easyui-textbox easyui-validatebox" data-options="required:true,validType:'length[0,100]'"/></td>
								<th>居住情况:</th>
								<td><input id="mortgageStatus" name="mortgageStatus"
									type="text" class="easyui-textbox easyui-validatebox easyui-aa" editable='false' panelHeight="auto"/></td>
							</tr>
							<tr>
							    <th>月供(元):</th>
							    <td>
							       <input name="houseInstallPay" class="easyui-textbox easyui-validatebox" data-options="required:true,validType:'mDouble'"/>
							    </td>
							    <th>房租(元):</th>
							    <td>
							       <input name="rent" class="easyui-textbox easyui-validatebox" data-options="required:true,validType:'mDouble'"/>
							    </td>
							    <th>邮箱:</th>
								<td>
								   <input id="email" name="email" type="text"
									class="easyui-textbox easyui-validatebox" data-options="required:true,validType:'email'"/>
								</td>
							</tr>
							<tr>
								<th>QQ号:</th>
								<td><input id="qqNo" name="qqNo" type="text"
									class="easyui-textbox easyui-validatebox" data-options="validType:'qq'"/></td>
							</tr>
							<tr>
							  <th>户籍地址:</th>
							  <td colspan="5">
							            省:<input id="hukouProvinceId" name="hukouProvinceId" type="text" class="easyui-combobox" style="width: 100px;"/>
							            市:<input id="hukouCityId" name="hukouCityId" type="text" class="easyui-combobox" style="width: 100px;"/>
							     区/县:<input id="hukouAreaId" name="hukouAreaId" type="text" class="easyui-combobox" style="width: 100px;"/>
							        街道:<input name="hukouAddrDetails" class="easyui-textbox easyui-validatebox" data-options="required:true,validType:'length[0,250]'" style="width: 303px;"/>
							  </td>
							</tr>
							<tr>
							   <th>现住地址:</th>
							   <td colspan="5">
							                  省:<input id="curProvinceId" name="curProvinceId" type="text" class="easyui-combobox" style="width: 100px;"/>
							                  市:<input id="curCityId" name="curCityId" type="text" class="easyui-combobox" style="width: 100px;"/> 
							           区/县:<input id="curAreaId" name="curAreaId" type="text" class="easyui-combobox" style="width: 100px;"/> 
							              街道:<input name="curAddrDetails" class="easyui-textbox easyui-validatebox" data-options="required:true,validType:'length[0,250]'" style="width: 303px;"/>     
							   </td>
							</tr>
							<tr>
							   <td colspan="6" style="text-align: right;">
							      <a href="javascript:void(0)" id="save" class="easyui-linkbutton" iconCls="icon-save" onclick="toSaveBaseInfo('save','edit');">保存</a>
							      <a href="javascript:void(0)" id="edit" class="easyui-linkbutton" iconCls="icon-save" style="display: none;" onclick="ableForm();">修改</a>
							   </td>
							</tr>
						</table>
				</form>
		        </div>
			</div>
			<div title="紧急联系人" data-options="iconCls:'icon-help'"
				style="padding: 10px">
				<div class="well well-small" style="margin-left: 5px;margin-top: 5px;width: 850px;">
				   <form id="LinkPeopleForm">
				   <input id="cusId" name="cusId" type="hidden"/><!--贷款人id -->
				   <input id="contactId" name="contactId" type="hidden"/><!-- 紧急联系人id -->
				   <input name="cusType" type="hidden"/><!-- 客户类型 -->
				   <input name="contactStatus" type="hidden"/><!-- 联系人的状态 -->
				   <input name="enName" type="hidden"/><!-- 联系人的英文名字 -->
				   <input name="idType" value="A" type="hidden"/><!-- 证件类型 -->
				   <input name="zip" type="hidden"/><!-- 邮政编码 -->
				   <input name="creator" type="hidden"/><!-- 创建人 -->
				   <input name="createDate" type="hidden"/><!-- 创建时间 -->
				   <input name="email" type="hidden"/><!-- 邮箱 -->
				   <input name="birthday" type="hidden"/><!-- 出生日期 -->
					<table class="table">
						<tr>
							<th>姓名:</th>
							<td><input name="chName" class="easyui-textbox easyui-validatebox" data-options="required:true,validType:'length[0,16]'" type="text" /></td>
							<th>性别:</th>
							<td><input id="genderType" name="genderType" type="text"
								class="easyui-textbox easyui-validatebox"  panelHeight="auto" editable='false'/></td>
							<th>身份证号:</th>
							<td><input name="idNo" type="text" class="easyui-textbox easyui-validatebox" data-options="required:true,validType:'idcard'"/></td>
						</tr>
						<tr>
							<th>年龄:</th>
							<td><input name="age" type="text" class="easyui-textbox easyui-validatebox" data-options="required:true,validType:'age'"/></td>
							<th>手机:</th>
							<td><input id="tel" name="tel" type="text" class="easyui-textbox easyui-validatebox" data-options="required:true,validType:'mobile'"/></td>
							<th>家庭电话:</th>
							<td><input id="fixedTel" name="fixedTel" type="text" class="easyui-textbox easyui-validatebox" data-options="required:true,validType:'phone'"/></td>
						</tr>
						<tr>
							<th>工作单位:</th>
							<td><input name="workplace" class="easyui-textbox easyui-validatebox" data-options="validType:'length[0,50]'"/></td>
							<th>单位电话:</th>
							<td><input name="compTel" class="easyui-textbox easyui-validatebox" data-options="validType:'phone'"/></td>
							<th>职务:</th>
							<td><input name="jobTitle" class="easyui-textbox easyui-validatebox" data-options="validType:'length[0,100]'"/></td>
						</tr>
						<tr>
							<th>年收入(元):</th>
							<td><input name="annualSalary" class="easyui-textbox easyui-validatebox" data-options="validType:'mDouble'"/></td>
							<th>工作年限(年):</th>
							<td><input name="yearsOfWork" class="easyui-textbox easyui-validatebox" data-options="validType:'integer'"/></td>
							<th>与本人关系:</th>
							<td>
							  <input id="relationship" name="relationship" class="easyui-textbox easyui-validatebox"  panelHeight="auto" editable='false'/>
							</td>
						</tr>
						<tr>
							<th>单位地址:</th>
							<td colspan="5">
							            省:<input id="compProvince" name="compProvince" class="easyui-combobox" style="width: 100px;"/> 
								市:<input id="compCity" name="compCity" class="easyui-combobox" style="width: 100px;"/> 
								县:<input id="compArea" name="compArea" class="easyui-combobox" style="width: 100px;"/>
								详细地址:<input name="compAddrDetails" class="easyui-textbox easyui-validatebox" style="width: 308px;"/>
							</td>
						</tr>
						<tr>
							<th>家庭地址:</th>
							<td colspan="5">
							        省:<input id="familyProvince" name="familyProvince" class="easyui-combobox" style="width: 100px;" /> 
							        市:<input id="familyCity" name="familyCity" class="easyui-combobox"  style="width: 100px;"/> 
							        县:<input id="familyArea" name="familyArea" class="easyui-combobox"  style="width: 100px;"/>
							        详细地址:<input name="familyAddrDetails" class="easyui-textbox easyui-validatebox" style="width: 308px;"/>
							</td>
						</tr>
						<tr>
							<td colspan="6" style="text-align: right;">
							  <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-reload" onclick="$('#LinkPeopleForm').form('clear');">重置</a>
							  <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-save" onclick="toSaveLinkPeople();">保存</a>
							</td>
						</tr>
					</table>
				</form>
				</div>
				<div style="margin-left: 5px;margin-top: 5px;">
				  <table id="linkPeople"></table>
				</div>
			</div>
			<div title="工作单位" data-options="iconCls:'icon-help'"
				style="padding: 10px">
				<div class="well well-small" style="margin-left: 5px;margin-top: 5px;width: 850px;">
				  <form id="dwform">
				    <input name="comId" type="hidden"/><!-- 公司id -->
				    <input name="creator" type="hidden"/><!-- 创建人 -->
				    <input name="createDate" type="hidden"/><!-- 创建时间 -->
					<table class="table">
						<tr>
							<th>工作单位:</th>
							<td><input name="name" class="easyui-textbox easyui-validatebox" data-options="required:true,validType:'length[0,16]'" type="text" />
							<th>单位电话:</th>
							<td><input name="tele" type="text" class="easyui-textbox easyui-validatebox" data-options="required:true,validType:'phone'"/></td>
							<th>注册号:</th>
							<td><input name="regId" type="text" class="easyui-textbox easyui-validatebox" data-options="required:true"/></td>
							</tr>
						<tr>
							<th>营业面积(m²):</th>
							<td><input name="areaSize" type="text" class="easyui-textbox easyui-validatebox" data-options="required:true,validType:'integer'"/></td>
							<th>注册资本(元):</th>
							<td><input name="regCapital" type="text" class="easyui-textbox easyui-validatebox" data-options="required:true,validType:'mDouble'"/></td>
							<th>成立时间:</th>
							<td><input name="foundedTime" type="text" class="easyui-datebox"  editable='false'/></td>
						</tr>
						<tr>
							<th>单位性质:</th>
							<td><input name="corpNature" type="text" class="easyui-textbox"/></td>
							<th>员工数量:</th>
							<td><input name="empAmount" type="text" class="easyui-textbox easyui-validatebox" data-options="required:true,validType:'integer'"/></td>
							<th>经营范围:</th>
							<td colspan="3"><input name="businessScope" type="text" class="easyui-textbox easyui-validatebox" data-options="required:true,validType:'length[0,100]'"/></td>
						</tr>
						<tr>
						    <th>单位地址:</th>
						    <td colspan="5">
						                        省:<input id="dwProvince" name="dwProvince" class="easyui-combobox" style="width: 100px;" /> 
								市:<input id="dwCity" name="dwCity" class="easyui-combobox" style="width: 100px;"/> 
								县:<input id="dwArea" name="dwArea" class="easyui-combobox" style="width: 100px;"/>
								详细地址:<input name="dwAddrDetails" class="easyui-textbox easyui-validatebox" data-options="required:true" style="width: 300px;"/>
						    </td>
						</tr>
						<tr>
						    <td colspan="6" style="text-align: right;">
						       <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-reload" onclick="$('#dwform').form('clear');">重置</a>
						       <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-save" onclick="toSaveDw();">保存</a>
						    </td>
						</tr>
					</table>
				</form>
				</div>
				<div style="margin-left: 5px;margin-top: 5px;">
				  <table id="dwDatagrid"></table>
				</div>
			</div>
			<div title="申请贷款信息" data-options="iconCls:'icon-help'"
				style="padding: 10px">
				<div class="well well-small" style="margin-left: 5px;margin-top: 5px;width: 700px;">
				  <form id="loanInfo">
				    <table class="table">
						<tr>
							<th>申请额度(元):</th>
							<td><input name="loanAmount" class="easyui-textbox easyui-validatebox" data-options="required:true,validType:'mDouble'" type="text" />
							<th>最低接受额度(元):</th>
							<td><input name="loanMin" type="text" class="easyui-textbox easyui-validatebox" data-options="required:true,validType:'mDouble'"/></td>
						</tr>
						<tr>
							<th>申请贷款期限(月):</th>
							<td><input name="loanPeriod" type="text" class="easyui-textbox easyui-validatebox" data-options="required:true,validType:'integer'"/></td>
							<th>还款方式:</th>
							<td><input id="repayMethod" name="repayMethod" type="text" class="easyui-textbox easyui-validatebox easyui-aa"  panelHeight="auto" editable="false"/></td>
						</tr>
						<tr>
						    <th>贷款类型:</th>
						    <td>
						       <input id="loanType" name="loanType" type="text" class="easyui-textbox easyui-validatebox easyui-aa"  panelHeight="auto" editable="false"/>
						    </td>
						    <th>业务员:</th>
							<td><input name="salesMan" class="easyui-textbox easyui-validatebox" data-options="required:true"/></td>
						</tr>
						<tr>
							<th>贷款用途:</th>
							<td colspan="3">
							  <textarea name="purpose" class="easyui-textbox easyui-validatebox" style="width: 470px; height: 80px;" data-options="required:true"></textarea>
							</td>
						</tr>
						<tr>
						    <td colspan="4" style="text-align: right;">
						      <a href="javascript:void(0)" id="saveinfo" class="easyui-linkbutton" iconCls="icon-save" onclick="toSaveLoanInfo();">保存</a>
						      <a href="javascript:void(0)" id="editinfo" class="easyui-linkbutton" iconCls="icon-edit" style="display: none;" onclick="showSavebut();">修改</a>
						    </td>
						</tr>
					</table>
				  </form>
				</div>
			</div>
			<div id="banks" title="开户行信息" data-options="iconCls:'icon-help'"
				style="padding: 10px">
				<div class="well well-small" style="margin-left: 5px;margin-top: 5px;width: 850px;">
				   <form id="bankForm" method="post">
				        <input id="bankCusId" name="cusId" type="hidden"/><!-- 贷款人id -->
				        <input id="accountId" name="accountId" type="hidden"/><!-- 开户行信息id -->
				        <input name="cusType" type="hidden"/><!-- 客户类型 -->
				        <input name="creator" type="hidden"/><!-- 创建人 -->
				        <input name="createDate" type="hidden"/><!-- 创建时间 -->
						<table class="table">
							<tr>
								<th>开户名称:</th>
								<td><input name="accountName" class="easyui-textbox easyui-validatebox" data-options="required:true,validType:'length[0,60]'" type="text" /></td>
								<th>开户行名称:</th>
								<td><input name="bankName" class="easyui-textbox easyui-validatebox" data-options="required:true,validType:'length[0,60]'" type="text" /></td>
								<th>开户账号:</th>
								<td><input name="accountNum" type="text" class="easyui-textbox easyui-validatebox easyui-numberbox" data-options="required:true" /></td>
							</tr>
							<tr>
							    <th>账户介质:</th>
							    <td><input name="actMedium" type="text" class="easyui-textbox easyui-validatebox" panelHeight="auto" editable="false"/></td>
							    <th>账户性质:</th>
							    <td><input name="actNature" type="text" class="easyui-textbox easyui-validatebox" panelHeight="auto" editable="false"/></td>
							</tr>
							<tr>
							  <td colspan="6" style="text-align: right;">
							    <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-reload" onclick="$('#bankForm').form('clear');">重置</a>
							    <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-save" onclick="toSaveBankInfo();">保存</a>
							  </td>
							</tr>
						</table>
				   </form>
				</div>
				<div style="margin-left: 5px;margin-top: 5px;">
				  <table id="bankGrid"></table>
				</div>
			</div>
			<div title="附件信息" data-options="iconCls:'icon-help'" style="padding: 10px">
				<div class="well well-small" style="margin-left: 5px;margin-top: 5px;width: 850px;">
				   <form id="fujianxinxi" method="post">
						<input name="auditId" type="hidden" value="noauditId"/>		
						<div id="attachmentList" style="width:100%;display:block;float:left;">
						</div>
						<div id="upload_form_div_adds">
							<div id="upload_form_father_idDivs" style="width:100%;">
								<div id="upload_form_divs">
									　上传附件　　
									<input class="easyui-textbox easyui-combobox" type="text" />
									<input name="fileName" type="text" placeholder="请输入附件名">
									<input id="fileIs" name="file" type="file"  onchange="fileChange(this);" > 
									<a href="javascript:void(0);" class="easyui-linkbutton" iconCls="icon-add" plain="true" onclick="addACredential(this);">添加</a>
									<a href="javascript:void(0);" class="easyui-linkbutton" iconCls="icon-remove" plain="true" onclick="removeACredential(this);">删除</a> 
								</div>
							</div>
						</div>
						<div id="upload_form" style="width: 100%; height: 30px; text-align: right;">
							<a href="javascript:void(0);" class="easyui-linkbutton" onclick="checkOrderID(this);">上传附件</a>
						</div> 
					</form>
				</div>
			</div>
			<div title="共同贷款人" data-options="iconCls:'icon-help'" style="padding: 10px">
				<div class="well well-small" style="margin-left: 5px;margin-top: 5px;width: 850px;">
				   <form id="loanerJointForm" method="post">
				   		 <!-- 共同贷款人的ID -->
						<input id="ljId" name="ljId" type="hidden" />
						 <!-- 订单id -->
						<input name="loanOrderId" type="hidden"/>
						 <!-- 公共贷款人的户籍地址 -->
						<input name="residenceAddressId" type="hidden">
						<input name="residenceAddressType" type="hidden">
						 <!-- 公共贷款人的当前地址 -->
						<input name="curAddressId" type="hidden">
						<input name="curAddressType" type="hidden">
						 <!-- 公共贷款人的单位地址 -->
						<input name="corpAddressId" type="hidden">
						<input name="corpAddressType" type="hidden">
						<table class="table">
							<tr>
								<th>姓名:</th>
								<td><input  name="name" class="easyui-validatebox easyui-textbox" type="text" data-options="validType:'length[0,100]'"/></td>
							    <th>身份证号:</th>
								<td><input  name="idNo" type="text" class="easyui-validatebox easyui-textbox" data-options="required:true,validType:'idcard'"/></td>
								<th>性别:</th>
								<td><input  name="gender" type="text"   editable='false' panelHeight="auto"/></td>
							</tr>
							<tr>
								<th>手机:</th>
								<td><input  name="mobileTel" type="text" class="easyui-validatebox easyui-textbox" data-options="required:true,validType:'mobile'"/></td>
								<th>住址电话:</th>
								<td><input  name="fixedTel" type="text" class="easyui-validatebox easyui-textbox" data-options="required:true,validType:'phone'"/></td>
								<th>家庭电话:</th>
								<td><input  name="familyTel" type="text" class="easyui-validatebox easyui-textbox" data-options="required:true,validType:'phone'"/></td>
							</tr>
							<tr>
								<th>年龄:</th>
								<td><input  name="age" type="text" class="easyui-validatebox easyui-textbox" data-options="validType:'age'"/></td>
								<th>婚姻状况:</th>
								<td><input  name="marriageType"   type="text"  editable='false' panelHeight="auto"/></td>
								<th>有无子女:</th>
								<td><input  name="hasChild" type="text"  editable='false' panelHeight="auto"/></td>
							</tr>
							<tr>
							    <th>邮箱:</th>
								<td>
								   <input  name="email" type="text" class="easyui-validatebox easyui-textbox" data-options="required:true,validType:'email'"/>
								</td>
								<th>QQ号:</th>
								<td><input name="qqNo" type="text" class="easyui-textbox easyui-validatebox" data-options="validType:'qq'"/></td>
							</tr>
							<tr>
								 <th>户籍地址:</th>
								 <td colspan="5">
								           省:<input id="residenceProvinceId" name="residenceProvinceId" type="text" class="easyui-combobox"  style="width: 100px;"/>
								           市:<input id="residenceCityId" name="residenceCityId" type="text" class="easyui-combobox" style="width: 100px;"/>
								    区/县:<input id="residenceAreaId" name="residenceAreaId" type="text" class="easyui-combobox" style="width: 100px;"/>
								       街道:<input name="residenceAddrDetails" class="easyui-textbox easyui-validatebox" data-options="required:true,validType:'length[0,250]'" style="width: 303px;"/>
								 </td>
							</tr>
							<tr>
								  <th>现住地址:</th>
								  <td colspan="5">
								                 省:<input id="ljCurProvinceId" name="curProvinceId" type="text" class="easyui-combobox" style="width: 100px;"/>
								                 市:<input id="ljCurCityId" name="curCityId" type="text" class="easyui-combobox" style="width: 100px;"/> 
								          区/县:<input id="ljCurAreaId" name="curAreaId" type="text" class="easyui-combobox" style="width: 100px;"/> 
								             街道:<input name="curAddrDetails" class="easyui-textbox easyui-validatebox" data-options="required:true,validType:'length[0,250]'" style="width: 303px;"/>     
								  </td>
							</tr>
							<tr>
								<th>工作单位:</th>
								<td><input  name="corpName" type="text" class="easyui-validatebox easyui-textbox" data-options="required:true,validType:'length[0,20]'"/></td>
								<th>单位电话:</th>
								<td><input  name="corpTel" type="text" class="easyui-validatebox easyui-textbox " data-options="required:true,validType:'phone'"/></td>
								<th>成立时间:</th>
								<td><input  name="foundedTime" type="text" class="easyui-datebox" data-options="editable:false"/></td>
							</tr>
							<tr>
								<th>营业面积:</th>
								<td><input  name="areaSize" type="text" class="easyui-validatebox easyui-numberbox" data-options="required:true,validType:'mDouble'"/></td>
								<th>单位性质:</th>
								<td><input  name="corpNature" type="text" class="easyui-validatebox"/></td>
								<th>注册资本:</th>
								<td><input  name="regCapital" type="text" class="easyui-textbox easyui-numberbox" data-options="required:true,validType:['mDouble','length[0,17]']"/></td>
							</tr>
							<tr>
							    <th>员工数量:</th>
							    <td><input name="ljEmpAmt" class="easyui-validatebox easyui-textbox" data-options="required:true,validType:'mDouble'"/></td>
							</tr>
							<tr>
								 <th>单位地址:</th>
								 <td colspan="5">
								                省:<input id="corpProvinceId" name="corpProvinceId" type="text" class="easyui-combobox" style="width: 100px;"/>
								                市:<input id="corpCityId" name="corpCityId" type="text" class="easyui-combobox" style="width: 100px;"/> 
								         区/县:<input id="corpAreaId" name="corpAreaId" type="text" class="easyui-combobox" style="width: 100px;"/> 
								            街道:<input name="corpAddrDetails" class="easyui-textbox easyui-validatebox" data-options="required:true,validType:'length[0,250]'" style="width: 303px;"/>     
								 </td>
							</tr>
							<tr>
							   <td colspan="6" style="text-align: right;">
							      <a href="javascript:void(0)" id="rset" class="easyui-linkbutton" iconCls="icon-reload" onclick="clearFun('loanerJointForm')">重置</a>
							      <a href="javascript:void(0)" id="save" class="easyui-linkbutton" iconCls="icon-save" onclick="saveLoanerJoint();">保存</a>
							   </td>
							</tr>
						</table>
					</form>
		        </div>
			</div>
		</div>
	</div>
</div>