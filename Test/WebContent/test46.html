<html>
<head>
<title>JS实现很酷的EMAIL地址添加功能</title>
 		<title>dynamicForm sample</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<link rel="stylesheet" type="text/css"  href="css/webuploader.css">
		<link rel="stylesheet" type="text/css"  href="js/jquery-ui.css">
		<link rel="stylesheet" href="css/demo.css" type="text/css" media="screen">
    	<link rel="stylesheet" href="css/demo-print.css" type="text/css" media="print">
		<script src="js/external/jquery/jquery.js"></script>
		<script src="js/webuploader.js"></script>
		<script src="js/jquery-ui.js"></script>
		<script src="js/raphael.js"></script>
		<script src="js/tiger.js"></script>
		<script src="js/helvetica.js"></script>
		<style type="text/css">
			 /* #holder {
                height: 230px;
                margin: -115px 0 0 -310px;
                width: 620px;
            } */
            
             #keycatcher {
                position: absolute;
                top: -9999em;
                left: -9999em;
            }
            p {
                text-align: center;
            }
		</style>
		<script type="text/javascript">
		 /* $(function() {
		 // Creates canvas 320 × 200 at 10, 50
			 var paper = Raphael(10, 50, 1024, 980);

			 // Creates circle at x = 50, y = 40, with radius 10
			 var circle = paper.circle(50, 40, 10);
			 // Sets the fill attribute of the circle to red (#f00)
			 circle.attr("fill", "#f00");

			 // Sets the stroke attribute of the circle to white
			 circle.attr("stroke", "#fff");
			 
			 paper.circle(320, 240, 60).animate(
					 {
						 fill: "#223fa3", 
						 stroke: "#000", 
						 "stroke-width": 80, 
						 "stroke-opacity": 0.5
					  }, 
						 2000); 
			 
			 
			 Raphael.fn.ball = function (x, y, r, hue) {
		            hue = hue || 0;
		            return this.set(
		                this.ellipse(x, y + r - r / 5, r, r / 2).attr({fill: "rhsb(" + hue + ", 1, .25)-hsb(" + hue + ", 1, .25)", stroke: "none", opacity: 0}),
		                this.ellipse(x, y, r, r).attr({fill: "r(.5,.9)hsb(" + hue + ", 1, .75)-hsb(" + hue + ", .5, .25)", stroke: "none"}),
		                this.ellipse(x, y, r - r / 5, r - r / 20).attr({stroke: "none", fill: "r(.5,.1)#ccc-#ccc", opacity: 0})
		            );
		        };
		        window.onload = function () {
		            var R = Raphael("holder"), x = 310, y = 180, r = 150;
		            R.ball(x, y, r, Math.random());
		        };
		 }); */
		 
		 /* window.onload = function () {
             var W = 1024,
                 H = 980,
                 r = Raphael("holder", W, H),
                 values = [],
                 len = 10;
             for (var i = len; i--;) {
                 values.push(50);
             }
             
             function translate(x, y) {
                 return [
                     50 + (W - 60) / (values.length - 1) * x,
                     H - 10 - (H - 20) / 100 * y
                 ];
             }
             
             function drawPath() {
                 var p = [];
                 for (var j = 1, jj = X.length; j < jj; j++) {
                     p.push(X[j], Y[j]);
                 }
                 p = ["M", X[0], Y[0], "R"].concat(p);
                 var subaddon = "L" + (W - 10) + "," + (H - 10) + ",50," + (H - 10) + "z";
                 path.attr({path: p});
                 sub.attr({path: p + subaddon});
             }
             
             var p = [["M"].concat(translate(0, values[0]))],
                 color = "hsb(240°, 1, 1)",
                 X = [],
                 Y = [],
                 blankets = r.set(),
                 buttons = r.set(),
                 w = (W - 60) / values.length,
                 isDrag = -1,
                 start = null,
                 sub = r.path().attr({stroke: "none", fill: [90, color, color].join("-"), opacity: 0}),
                 path = r.path().attr({stroke: color, "stroke-width": 2}),
                 unhighlight = function () {};
             var ii;
             for (i = 0, ii = values.length - 1; i < ii; i++) {
                 var xy = translate(i, values[i]),
                     xy1 = translate(i + 1, values[i + 1]),
                     f;
                 X[i] = xy[0];
                 Y[i] = xy[1];
                 (f = function (i, xy) {
                     buttons.push(r.circle(xy[0], xy[1], 5).attr({fill: color, stroke: "none"}));
                     blankets.push(r.circle(xy[0], xy[1], w / 2).attr({stroke: "none", fill: "#fff", opacity: 0}).mouseover(function () {
                         if (isDrag + 1) {
                             unhighlight = function () {};
                         } else {
                             buttons.items[i].animate({r: 10}, 200);
                         }
                     }).mouseout(function () {
                         if (isDrag + 1) {
                             unhighlight = function () {
                                 buttons.items[i].animate({r: 5}, 200);
                             };
                         } else {
                             buttons.items[i].animate({r: 5}, 200);
                         }
                     }).drag(function (dx, dy) {
                         var start = this.start;
                         start && update(start.i, start.p + dy);
                     }, function (x, y) {
                         this.start = {i: i, m: y, p: Y[i]};
                     }));
                     blankets.items[blankets.items.length - 1].node.style.cursor = "move";
                 })(i, xy);
                 if (i == ii - 1) {
                     f(i + 1, xy1);
                 }
             }
             xy = translate(ii, values[ii]);
             X.push(xy[0]);
             Y.push(xy[1]);
             
             drawPath();
             var update = function (i, d) {
                 (d > H - 10) && (d = H - 10);
                 (d < 10) && (d = 10);
                 Y[i] = d;
                 drawPath();
                 buttons.items[i].attr({cy: d});
                 blankets.items[i].attr({cy: d});
                 r.safari();
             };
         }; */
         
         /* window.onload = function () {
             var r = Raphael("holder", 640, 480),
                 angle = 0;
             while (angle < 360) {
                 var color = Raphael.getColor();
                 (function (t, c) {
                     r.circle(320, 450, 20).attr({stroke: c, fill: c, transform: t, "fill-opacity": .4}).click(function () {
                         s.animate({transform: t, stroke: c}, 2000, "bounce");
                     }).mouseover(function () {
                         this.animate({"fill-opacity": .75}, 500);
                     }).mouseout(function () {
                         this.animate({"fill-opacity": .4}, 500);
                     });
                 })("r" + angle + " 320 240", color);
                 angle += 30;
             }
             Raphael.getColor.reset();
             var s = r.set();
             s.push(r.path("M320,240c-50,100,50,110,0,190").attr({fill: "none", "stroke-width": 2}));
             s.push(r.circle(320, 450, 20).attr({fill: "none", "stroke-width": 2}));
             s.push(r.circle(320, 240, 5).attr({fill: "none", "stroke-width": 10}));
             s.attr({stroke: Raphael.getColor()});
         }; */
         /* window.onload = function () {
            // var r = Raphael(tiger).translate(200, 200);
        	  Raphael(function () {
                  var r = Raphael("holder", 620, 250),
                      e = [],
                      clr = [],
                      months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
                      values = [],
                      now = 0,
                      month = r.text(310, 27, months[now]).attr({fill: "#fff", stroke: "none", "font": '100 18px "Helvetica Neue", Helvetica, "Arial Unicode MS", Arial, sans-serif'}),
                      rightc = r.circle(364, 27, 10).attr({fill: "#fff", stroke: "none"}),
                      right = r.path("M360,22l10,5 -10,5z").attr({fill: "#000"}),
                      leftc = r.circle(256, 27, 10).attr({fill: "#fff", stroke: "none"}),
                      left = r.path("M260,22l-10,5 10,5z").attr({fill: "#000"}),
                      c = r.path("M0,0").attr({fill: "none", "stroke-width": 4, "stroke-linecap": "round"}),
                      bg = r.path("M0,0").attr({stroke: "none", opacity: .3}),
                      dotsy = [];
                  function randomPath(length, j) {
                      var path = "",
                          x = 10,
                          y = 0;
                      dotsy[j] = dotsy[j] || [];
                      for (var i = 0; i < length; i++) {
                          dotsy[j][i] = Math.round(Math.random() * 200);
                          // if (i) {
                          //     path += "C" + [x + 10, y, (x += 20) - 10, (y = 240 - dotsy[j][i]), x, y];
                          // } else {
                          //     path += "M" + [10, (y = 240 - dotsy[j][i])];
                          // }
                          if (i) {
                              x += 20;
                              y = 240 - dotsy[j][i];
                              path += "," + [x, y];
                          } else {
                              path += "M" + [10, (y = 240 - dotsy[j][i])] + "R";
                          }
                      }
                      return path;
                  }
                  for (var i = 0; i < 12; i++) {
                      values[i] = randomPath(30, i);
                      clr[i] = Raphael.getColor(1);
                  }
                  c.attr({path: values[0], stroke: clr[0]});
                  bg.attr({path: values[0] + "L590,250 10,250z", fill: clr[0]});
                  var animation = function () {
                      var time = 500;
                      if (now == 12) {
                          now = 0;
                      }
                      if (now == -1) {
                          now = 11;
                      }
                      var anim = Raphael.animation({path: values[now], stroke: clr[now]}, time, "<>");
                      c.animate(anim);
                      bg.animateWith(c, anim, {path: values[now] + "L590,250 10,250z", fill: clr[now]}, time, "<>");
                      month.attr({text: months[now]});
                  };
                  var next = function () {
                          now++;
                          animation();
                      },
                      prev = function () {
                          now--;
                          animation();
                      };
                  rightc.click(next);
                  right.click(next);
                  leftc.click(prev);
                  left.click(prev);
              });
         }; */
         /* window.onload = function () {
             var r = Raphael("holder", 800, 600), pos = [0, 0];
             var letter = r.path("M0,0L0,0z").attr({fill: "#fff", stroke: "#fff", "fill-opacity": .3, "stroke-width": 1, "stroke-linecap": "round", translation: "100 100"});
             var kc = document.getElementById("keycatcher");
             kc.onkeyup = function (e) {
                 var key = this.value.substring(this.value.length - 1);
                 this.value = "";
                 if (key && key in helvetica) {
                     letter.animate({path: helvetica[key]}, 200);
                 }
                 return false;
             };
             kc.onblur = function () {
                 kc.focus();
             };
             kc.focus();
         }; */
         
         window.onload = function () {
             var r = Raphael("holder", 600, 600),
                 R = 200,
                 init = true,
                 param = {stroke: "#fff", "stroke-width": 30},
                 hash = document.location.hash,
                 marksAttr = {fill: hash || "#444", stroke: "none"},
                 html = [
                     document.getElementById("h"),
                     document.getElementById("m"),
                     document.getElementById("s"),
                     document.getElementById("d"),
                     document.getElementById("mnth"),
                     document.getElementById("ampm")
                 ];
             // Custom Attribute
             r.customAttributes.arc = function (value, total, R) {
                 var alpha = 360 / total * value,
                     a = (90 - alpha) * Math.PI / 180,
                     x = 300 + R * Math.cos(a),
                     y = 300 - R * Math.sin(a),
                     color = "hsb(".concat(Math.round(R) / 200, ",", value / total, ", .75)"),
                     path;
                 if (total == value) {
                     path = [["M", 300, 300 - R], ["A", R, R, 0, 1, 1, 299.99, 300 - R]];
                 } else {
                     path = [["M", 300, 300 - R], ["A", R, R, 0, +(alpha > 180), 1, x, y]];
                 }
                 return {path: path, stroke: color};
             };

             drawMarks(R, 60);
             var sec = r.path().attr(param).attr({arc: [0, 60, R]});
             R -= 40;
             drawMarks(R, 60);
             var min = r.path().attr(param).attr({arc: [0, 60, R]});
             R -= 40;
             drawMarks(R, 12);
             var hor = r.path().attr(param).attr({arc: [0, 12, R]});
             R -= 40;
             drawMarks(R, 31);
             var day = r.path().attr(param).attr({arc: [0, 31, R]});
             R -= 40;
             drawMarks(R, 12);
             var mon = r.path().attr(param).attr({arc: [0, 12, R]});
             var pm = r.circle(300, 300, 16).attr({stroke: "none", fill: Raphael.hsb2rgb(15 / 200, 1, .75).hex});
             html[5].style.color = Raphael.hsb2rgb(15 / 200, 1, .75).hex;

             function updateVal(value, total, R, hand, id) {
                 if (total == 31) { // month
                     var d = new Date;
                     d.setDate(1);
                     d.setMonth(d.getMonth() + 1);
                     d.setDate(-1);
                     total = d.getDate();
                 }
                 var color = "hsb(".concat(Math.round(R) / 200, ",", value / total, ", .75)");
                 if (init) {
                     hand.animate({arc: [value, total, R]}, 900, ">");
                 } else {
                     if (!value || value == total) {
                         value = total;
                         hand.animate({arc: [value, total, R]}, 750, "bounce", function () {
                             hand.attr({arc: [0, total, R]});
                         });
                     } else {
                         hand.animate({arc: [value, total, R]}, 750, "elastic");
                     }
                 }
                 html[id].innerHTML = (value < 10 ? "0" : "") + value;
                 html[id].style.color = Raphael.getRGB(color).hex;
             }

             function drawMarks(R, total) {
                 if (total == 31) { // month
                     var d = new Date;
                     d.setDate(1);
                     d.setMonth(d.getMonth() + 1);
                     d.setDate(-1);
                     total = d.getDate();
                 }
                 var color = "hsb(".concat(Math.round(R) / 200, ", 1, .75)"),
                     out = r.set();
                 for (var value = 0; value < total; value++) {
                     var alpha = 360 / total * value,
                         a = (90 - alpha) * Math.PI / 180,
                         x = 300 + R * Math.cos(a),
                         y = 300 - R * Math.sin(a);
                     out.push(r.circle(x, y, 2).attr(marksAttr));
                 }
                 return out;
             }

             (function () {
                 var d = new Date,
                     am = (d.getHours() < 12),
                     h = d.getHours() % 12 || 12;
                 updateVal(d.getSeconds(), 60, 200, sec, 2);
                 updateVal(d.getMinutes(), 60, 160, min, 1);
                 updateVal(h, 12, 120, hor, 0);
                 updateVal(d.getDate(), 31, 80, day, 3);
                 updateVal(d.getMonth() + 1, 12, 40, mon, 4);
                 pm[(am ? "hide" : "show")]();
                 html[5].innerHTML = am ? "AM" : "PM";
                 setTimeout(arguments.callee, 1000);
                 init = false;
             })();
         };
		</script>
		 <style media="screen">
            #holder {
                height: 600px;
                margin: -300px 0 0 -300px;
                width: 600px;
            }
            #time {
                text-align: center;
                font: 100 3em "Helvetica Neue", Helvetica, Arial, sans-serif;
            }
        </style>
</head>
<body>
	<!--  <input type="text" value="" id="keycatcher">
      <div id="holder"></div> -->
      
      <div id="holder"></div>
        <div id="time">
            <span id="h"></span>:<span id="m"></span>:<span id="s"></span> <span id="ampm"></span> · <span id="d"></span>/<span id="mnth"></span>
        </div>
</body>
</html>