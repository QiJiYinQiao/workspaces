/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.59
 * Generated at: 2016-02-22 05:32:49 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.jsp.investRedeem;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;

public final class investRedeemMain_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private javax.el.ExpressionFactory _el_expressionfactory;
  private org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public void _jspInit() {
    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
    _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write('\r');
      out.write('\n');

String path = request.getContextPath();
String basePath = request.getScheme()+"://"+request.getServerName()+":"+request.getServerPort()+path+"/";

      out.write("\r\n");
      out.write("<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\">\r\n");
      out.write("<html>\r\n");
      out.write("<head>\r\n");
      out.write("<base href=\"");
      out.print(basePath);
      out.write("\">\r\n");
      org.apache.jasper.runtime.JspRuntimeLibrary.include(request, response, "../../layout/script.jsp", out, false);
      out.write("\r\n");
      out.write("<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\r\n");
      out.write("<title>投资赎回管理</title>\r\n");
      out.write("</head>\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("\t$(function(){\r\n");
      out.write("\t\tcreateInvestRedeemListDataGrid();\r\n");
      out.write("\t});\r\n");
      out.write("\t\r\n");
      out.write("\t//定义一个全局的变量\r\n");
      out.write("\tvar rowDataSelected;\r\n");
      out.write("\t\r\n");
      out.write("\t//定义导出Excel报表的基础URL\r\n");
      out.write("\tvar exportExcelUrl = \"investRedeem/investRedeemAction!exportExcel4RedeemInvestorDetails.action\";\r\n");
      out.write("\t\r\n");
      out.write("\t//工具\r\n");
      out.write("\tfunction getRowData4RedeemMainJsp(index) {\r\n");
      out.write("\t\tif (!$.isNumeric(index) || index < 0) {\r\n");
      out.write("\t\t\treturn undefined;\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\tvar rows = $(\"#investRedeemListDataGrid\").datagrid(\"getRows\");\r\n");
      out.write("\t\treturn rows[index];\r\n");
      out.write("\t}\t\r\n");
      out.write("\t\r\n");
      out.write("\t// 自动调整页面高度\r\n");
      out.write(" \t$(window).resize(function(){  \r\n");
      out.write("            $(\"#investRedeemListDataGrid\").datagrid({  \r\n");
      out.write("            \theight: $(window).height()-100,\r\n");
      out.write("            \twidth : 'auto'\r\n");
      out.write("            });                \r\n");
      out.write("        });\r\n");
      out.write("\t\r\n");
      out.write("\t//渲染投资赎回列表\r\n");
      out.write("\tfunction createInvestRedeemListDataGrid(){\r\n");
      out.write("\t\t$(\"#investRedeemListDataGrid\").datagrid({\r\n");
      out.write("  \t\t\turl:'investRedeem/investRedeemAction!findInvestRedeemList.action',  \r\n");
      out.write("\t\t\ttitle:'投资赎回列表',\r\n");
      out.write("\t\t\twidth: 'auto',\r\n");
      out.write("\t\t\theight : $(window).height()-75,\r\n");
      out.write("\t\t\tpagination:true,\r\n");
      out.write("\t\t\trownumbers:true,\r\n");
      out.write("\t\t\tborder:false,\r\n");
      out.write("\t\t\t/* singleSelect:true, */\r\n");
      out.write("\t\t\tnowrap:true,//如果为true，则在同一行中显示数据。设置为true可以提高加载性能。\r\n");
      out.write("\t\t\tpageSize:30,\r\n");
      out.write("\t\t\tpageList:[10,20,30,40],\r\n");
      out.write("\t\t\tremoteSort:false,//定义是否从服务器对数据进行排序。\r\n");
      out.write("\t\t\tstriped:true,//是否显示斑马线\r\n");
      out.write("\t\t\tcolumns:[[\r\n");
      out.write("\t\t\t\t\t{field : 'investProcessType',title : '流程类型', width : parseInt($(this).width() * 0.05),align : 'center', \r\n");
      out.write("\t\t\t\t\t\tformatter: function(value, row, index){\r\n");
      out.write("\t\t\t\t\t\t\tif(row.investProcessType == \"1\"){\r\n");
      out.write("\t\t\t\t\t\t\t\treturn \"投资申请\";\r\n");
      out.write("\t\t\t\t\t\t\t}else if(row.investProcessType == \"2\"){\r\n");
      out.write("\t\t\t\t\t\t\t\treturn \"投资赎回\";\r\n");
      out.write("\t\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t},\t\t\t          \r\n");
      out.write("\t\t\t        {field : 'chName',title : '客户姓名', width : parseInt($(this).width() * 0.05) ,align : 'center',\r\n");
      out.write("\t\t            \t  formatter: function(value, row, index){\r\n");
      out.write("\t\t            \t\t  return \"<a href=\\\"javascript:void(0)\\\" onclick=\\\"showInvestorView(\"+index+\")\\\">\"+value+\"</a>\";\r\n");
      out.write("\t\t            \t  }\t\t\t        \t\t\t\t        \r\n");
      out.write("\t\t\t        },\r\n");
      out.write("\t                {field : 'redeemBeginDate',title : '赎回申请日期', width : parseInt($(this).width() * 0.08) ,align : 'center', \r\n");
      out.write("\t\t            \t  formatter: function(value, row, index){\r\n");
      out.write("\t\t            \t\t  if(value == null){\t\t            \t\t\t  \r\n");
      out.write("\t\t            \t\t  \treturn \"未开启赎回流程\";\r\n");
      out.write("\t\t            \t\t  }else{\r\n");
      out.write("\t\t            \t\t\t  return value;\r\n");
      out.write("\t\t            \t\t  }\r\n");
      out.write("\t\t            \t  }\t\t\t        \t\t\t\t        \t\t\t        \t\t\r\n");
      out.write("\t                },\t                \r\n");
      out.write("\t                {field : 'createDate',title : '投资申请生成日期', width : parseInt($(this).width() * 0.08) ,align : 'center'},\r\n");
      out.write("\t                {field : 'beginDate',title : '投资开始日期', width : parseInt($(this).width() * 0.08) ,align : 'center'},\r\n");
      out.write("\t                {field : 'interestDate',title : '计息日期', width : parseInt($(this).width() * 0.08) ,align : 'center'},\r\n");
      out.write("\t                {field : 'contractNo',title : '合同编号', width : parseInt($(this).width() * 0.07) ,align : 'center',\r\n");
      out.write("\t\t\t\t\t\t  formatter: function(value, row, index){\r\n");
      out.write("\t\t\t\t\t\t\t  if(row.contractNo == null || row.contractNo == \"\"){\t\t\t\t\t            \t\t\t  \r\n");
      out.write("\t\t\t\t\t    \t\treturn \"\";\t\t\t\t\t            \t\t\t  \t\t\t\t\t\r\n");
      out.write("\t\t\t\t\t\t\t  }else{\t\t\t\t\t            \t\t\t  \r\n");
      out.write("\t\t\t\t\t\t\t  \treturn \"<a href=\\\"javascript:void(0)\\\" onclick=\\\"showInvestContractDetailsView(\"+index+\")\\\">\"+value+\"</a>\";\t\t\t\t\t            \t\t\t \r\n");
      out.write("\t\t\t\t\t\t\t  }\r\n");
      out.write("\t\t\t\t\t\t  }\t                \t\t                \r\n");
      out.write("\t                },\r\n");
      out.write("\t                {field : 'bankName',title : '开户行名称', width : parseInt($(this).width() * 0.06) ,align : 'center'},\r\n");
      out.write("\t                {field : 'actNo',title : '开户账号', width : parseInt($(this).width() * 0.08) ,align : 'center'},\r\n");
      out.write("\t                {field : 'actName',title : '账户名称', width : parseInt($(this).width() * 0.05) ,align : 'center'},\r\n");
      out.write("\t                {field : 'prodName',title : '理财产品', width : parseInt($(this).width() * 0.06) ,align : 'center',\r\n");
      out.write("\t\t            \t  formatter: function(value, row, index){\r\n");
      out.write("\t\t            \t\t  var result =\"\";\r\n");
      out.write("\t\t            \t\t  if(row.prodName == \"\" || row.prodName == \"undefined\" || row.prodName == null){\r\n");
      out.write("\t\t            \t\t\t  return result;  \r\n");
      out.write("\t\t            \t\t  }else{\t\t            \t\t\t  \r\n");
      out.write("\t\t            \t\t  \t  return result =\"<a href='javascript:void(0);' onclick='showInvestorAndInvestProductsDetailsView(\\\"\"+row.investOrderId+\"\\\");'>\"+row.prodName+\"</a>\";\r\n");
      out.write("\t\t            \t\t  }\t\t      \t\t\t\t  \t\t\t\t\t            \t\t  \r\n");
      out.write("\t\t            \t  }\t                \t\r\n");
      out.write("\t                },\r\n");
      out.write("\t                {field : 'investEdu',title : '投资金额(元)', width : parseInt($(this).width() * 0.06) ,align : 'center'},\r\n");
      out.write("\t                {field : 'aa',title : '操作', width : parseInt($(this).width() * 0.12) ,align : 'center',\r\n");
      out.write("\t                \tformatter:function(value,row,index){\r\n");
      out.write("\t\t\t\t\t\t\t/* 投资申请流程已经结束，投资流程类型为投资申请 */\t                \t\t\r\n");
      out.write("\t                \t\tif(row.processStatus == \"0\"){\t                \t\t\t\r\n");
      out.write("\t                \t\t\treturn\t\"<a href='javascript:void(0);' onclick='deleteInvestRedeemRecord(\"+ index + \");'>删除赎回申请</a>&nbsp;&nbsp;&nbsp;\" +\r\n");
      out.write("\t\t\t\t\t\t\t\t \t\t\"<a href='javascript:void(0);' onclick='submitInvestRedeem(\"+ index + \");'>提交赎回申请</a>\" \r\n");
      out.write("\t\t\t\t\t\t\t\t; \r\n");
      out.write("\t                \t\t}else if(row.processStatus == \"1\"){\r\n");
      out.write("\t\t             \t    \treturn \"<a href='javascript:void(0);' onclick='checkProcessImg(\"+ index + \");'>查看流程图</a>&nbsp;&nbsp;&nbsp;\"  +\t\r\n");
      out.write("\t\t             \t    \t\t   \"<a href='javascript:void(0);' onclick='checkInvestOrderOpinions(\"+ index + \");'>查看审批意见</a>\";\r\n");
      out.write("\t                \t\t}\t                \t\t\r\n");
      out.write("\t                \t\telse{\t                \t\t\t\t                \t\t\t\r\n");
      out.write("\t                \t\t\treturn  \"<a href='javascript:void(0);' onclick='checkInvestOrderOpinions(\"+ index + \");'>查看审批意见</a>\";\r\n");
      out.write("\t                \t\t}\t                \t\t\r\n");
      out.write("\t                }}\r\n");
      out.write("\t                \r\n");
      out.write("\t\t   ]],\r\n");
      out.write(" \t\t   toolbar:[\r\n");
      out.write("\t\t\t{\r\n");
      out.write("\t\t\t   iconCls: 'icon-add',\r\n");
      out.write("\t\t\t   text:'新增投资赎回申请',\r\n");
      out.write("\t\t\t   handler:toAddInvestRedeemRecord\r\n");
      out.write("\t\t    }\r\n");
      out.write("/* \t\t\t,{\r\n");
      out.write("\t\t\t   iconCls: 'icon-excel',\r\n");
      out.write("\t\t\t   text:'导出赎回客户明细',\r\n");
      out.write("\t\t\t   handler:toExportExcel4RedeemInvestor,\t\t\t   \r\n");
      out.write("\t\t    }\t\t    \r\n");
      out.write(" */\t\t   ]\r\n");
      out.write("\t\t});\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t//导出赎回客户明细报表\r\n");
      out.write("\tfunction toExportExcel4RedeemInvestor(){\t\t\r\n");
      out.write("/* \t\tvar selectedRowData = $(\"#investRedeemListDataGrid\").datagrid(\"getSelections\");\t\t\t\t\r\n");
      out.write("\t\tvar investOrderIds = new Array();\t\t\r\n");
      out.write("\t\tfor(var index=0; index<selectedRowData.length; index++){\r\n");
      out.write("\t\t\tinvestOrderIds.push(selectedRowData[index].investOrderId);\r\n");
      out.write("\t\t}\t\t\r\n");
      out.write(" \t\tvar exportExcelUrl = \"investRedeem/investRedeemAction!exportExcel4RedeemInvestor.action?investOrderIds=\"+investOrderIds;  */\t\t\r\n");
      out.write("\t\t\t\t\t\t\r\n");
      out.write(" \t\t//执行报表导出\r\n");
      out.write("\t\twindow.location.href = exportExcelUrl;\t\t\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t//新增投资赎回\r\n");
      out.write("\tfunction toAddInvestRedeemRecord(){\r\n");
      out.write("\t\t//初始化已经完成审批的投资申请信息列表数据\r\n");
      out.write("\t\tinitAlreadyApprovedInvestApplyList();\r\n");
      out.write("\t\t$(\"#addInvestRedeemDialog\").dialog(\"open\");\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t//初始化已经完成审批的投资申请信息列表数据\r\n");
      out.write("\tfunction initAlreadyApprovedInvestApplyList(){\r\n");
      out.write("\t\t$(\"#approvedInvestApplyListDataGrid\").datagrid({\r\n");
      out.write("\t\t\turl:'investRedeem/investRedeemAction!findAlreadyApprovedInvestApplyList.action',\r\n");
      out.write("\t\t\twidth: 885,\r\n");
      out.write("\t\t\theight: 534,\r\n");
      out.write("\t\t\tpagination:true,\r\n");
      out.write("\t\t\trownumbers:true,\r\n");
      out.write("\t\t\tborder:false,\r\n");
      out.write("\t\t\tsingleSelect:true,\r\n");
      out.write("\t\t\tnowrap:true,//如果为true，则在同一行中显示数据。设置为true可以提高加载性能。\r\n");
      out.write("\t\t\tpageSize:20,\r\n");
      out.write("\t\t\tpageList:[10,20,30,40],\r\n");
      out.write("\t\t\tremoteSort:false,//定义是否从服务器对数据进行排序。\r\n");
      out.write("\t\t\tstriped:true,//是否显示斑马线\r\n");
      out.write("\t\t\t//单击事件，单击“投资申请信息列表”中的某一行，将选中的某个投资申请记录的investOrderId，\t\t\t\r\n");
      out.write("\t \t\tonClickRow:function(rowIndex,rowData){\r\n");
      out.write("\t\t\t\trowDataSelected = rowData;\t\t\t\t\r\n");
      out.write("\t\t\t},\r\n");
      out.write("\t\t\tcolumns:[[\r\n");
      out.write("\t\t\t\t\t\t{field : 'investProcessType',title : '流程类型',width :80,align : 'center', \r\n");
      out.write("\t\t\t\t\t\t\tformatter: function(value, row, index){\r\n");
      out.write("\t\t\t\t\t\t\t\tif(row.investProcessType == \"1\"){\r\n");
      out.write("\t\t\t\t\t\t\t\t\treturn \"投资申请\";\r\n");
      out.write("\t\t\t\t\t\t\t\t}else if(row.investProcessType == \"2\"){\r\n");
      out.write("\t\t\t\t\t\t\t\t\treturn \"投资赎回\";\r\n");
      out.write("\t\t\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t\t},\r\n");
      out.write("\t\t\t\t        {field : 'chName',title : '客户姓名',width :80,align : 'center'},\r\n");
      out.write("\t\t                {field : 'createDate',title : '投资申请生成日期',width : 130,align : 'center'},\t                \r\n");
      out.write("\t\t                {field : 'contractNo',title : '合同编号',width :100,align : 'center'},\r\n");
      out.write("\t\t                {field : 'bankName',title : '开户行名称',width :100,align : 'center'},\r\n");
      out.write("\t\t                {field : 'actNo',title : '开户账号',width :100,align : 'center'},\r\n");
      out.write("\t\t                {field : 'actName',title : '账户名称',width :100,align : 'center'},\r\n");
      out.write("\t\t                {field : 'prodName',title : '理财产品',width :100,align : 'center'},\r\n");
      out.write("\t\t                {field : 'investEdu',title : '投资金额',width :100,align : 'center'},\r\n");
      out.write("\t\t                {field : 'beginDate',title : '投资开始日期',width :100,align : 'center'},\r\n");
      out.write("\t\t                {field : 'interestDate',title : '计息日期',width :100,align : 'center'}\t\t                \r\n");
      out.write("\t\t\t   ]],\r\n");
      out.write("\t \t\t   toolbar:[{\r\n");
      out.write("\t\t\t\t   iconCls: 'icon-add',\r\n");
      out.write("\t\t\t\t   text:'确定添加',\r\n");
      out.write("\t\t\t\t   handler: toAddNewInvestRedeem\r\n");
      out.write("\t\t\t   }]\t\t\t\t\t\t\r\n");
      out.write("\t\t});\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t//新增投资赎回申请（选择投资申请订单，并将其改变为投资赎回）\r\n");
      out.write("\t//(1)修改该投资业务订单表(t_bp_invest_order)表中“INVEST_PROCESS_TYPE”字段，将其由“1(代表：投资申请流程)”修改为“2(代表：投资赎回流程)”\r\n");
      out.write("\t//(2)修改该投资业务订单表(t_bp_invest_order)表中“PROCESS_STATUS”字段，将其修改为“0(代表：流程未开启)”\r\n");
      out.write("\tfunction toAddNewInvestRedeem(){\t\t\r\n");
      out.write("\t\tvar investOrderId = rowDataSelected.investOrderId;\r\n");
      out.write("\t\tvar investProcessType = \"2\";   //参数值2(代表：投资赎回流程)\r\n");
      out.write("\t\tvar processStatus = \"0\";       //流程状态编码说明:0－未开启，1－已开启，2－已结束\r\n");
      out.write("\r\n");
      out.write("\t\t/* updateInvestOrderProcessType(investOrderId, investProcessType); */\t\r\n");
      out.write("\t\t$.messager.confirm('确定', '是否确定赎回此笔投资？', function(flag) {\r\n");
      out.write("\t\t\tif(flag){\r\n");
      out.write("\t\t\t\t$.ajax({\r\n");
      out.write(" \t\t\t\t\turl:\"investRedeem/investRedeemAction!addNewInvestRedeem.action\", \r\n");
      out.write("\t\t\t\t\tdata : {\r\n");
      out.write("\t\t\t\t\t\t\t\t\"investOrderId\" : investOrderId,            //投资订单\r\n");
      out.write("\t\t\t\t\t\t\t\t\"investProcessType\" : investProcessType,    //投资流程类型，2代表投资赎回流程。\r\n");
      out.write("\t\t\t\t\t\t\t\t\"processStatus\" :  processStatus            //流程状态\r\n");
      out.write("\t\t\t\t\t\t\t},\r\n");
      out.write("\t\t\t\t\ttype : \"POST\",\r\n");
      out.write("\t\t\t\t\tasync : false,\r\n");
      out.write("\t\t\t\t\tsuccess : function(returnedData){\r\n");
      out.write("\t\t\t\t\t\tif(returnedData.status == true){\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n");
      out.write("\t\t\t\t\t\t\t$(\"#addInvestRedeemDialog\").dialog(\"close\");\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n");
      out.write("\t\t\t\t\t\t\t//重新加载DataGrid。\r\n");
      out.write("\t\t\t\t\t\t\t$(\"#investRedeemListDataGrid\").datagrid(\"reload\");\t\t\t\t\t\t\t\r\n");
      out.write("\t\t\t\t\t\t}else{\r\n");
      out.write("\t\t\t\t\t\t\tparent.$.messager.alert(returnedData.title,returnedData.message,'error');\r\n");
      out.write("\t\t\t\t\t\t}\t\r\n");
      out.write("\t\t\t\t\t}\t\t\t\t\t\r\n");
      out.write("\t\t\t\t});\t\t\t\t\r\n");
      out.write("\t\t\t}\t\t\t\r\n");
      out.write("\t\t});\t\r\n");
      out.write("\t\t\r\n");
      out.write("\t}\t\r\n");
      out.write("\t\t\r\n");
      out.write("\t//删除选中的投资赎回记录\r\n");
      out.write("\t//注意：删除投资赎回记录并没有数据库底层t_bp_invest_order表中的数据InvestOrder信息删除，\r\n");
      out.write("\t//而是修改该表中一些字段。\r\n");
      out.write("\t//(1)“INVEST_PROCESS_TYPE”字段，将由原来的“2(投资赎回流程)”其设置为“1(投资申请流程)”\r\n");
      out.write("\t//(2)“PROCESS_STATUS”字段，暂时修改为“2(已完成状态)”。（待定）\r\n");
      out.write("\tfunction deleteInvestRedeemRecord(index){\t\t\r\n");
      out.write("\t\tvar curRowData = getRowData4RedeemMainJsp(index);\t\t\r\n");
      out.write("\t\tvar investOrderId = curRowData.investOrderId;\t\r\n");
      out.write("\t\tvar investProcessType = \"1\";\r\n");
      out.write("\t\tvar processStatus = \"2\"; //流程状态编码说明:0－未开启，1－已开启，2－已结束\r\n");
      out.write("\t\t$.messager.confirm('确定', '是否确定删除本笔投资赎回？', function(flag) {\r\n");
      out.write("\t\t\tif(flag){\r\n");
      out.write("\t\t\t\t$.ajax({\r\n");
      out.write(" \t\t\t\t\turl:\"investRedeem/investRedeemAction!deleteInvestRedeemRecord.action\", \r\n");
      out.write("\t\t\t\t\tdata : {\r\n");
      out.write("\t\t\t\t\t\t\t\t\"investOrderId\" : investOrderId,             //投资订单\r\n");
      out.write("\t\t\t\t\t\t\t\t\"investProcessType\" : investProcessType,     //投资流程类型，1代表投资申请流程。\r\n");
      out.write("\t\t\t\t\t\t\t\t\"processStatus\" : processStatus              //流程状态编码\r\n");
      out.write("\t\t\t\t\t\t\t},\r\n");
      out.write("\t\t\t\t\ttype : \"POST\",\r\n");
      out.write("\t\t\t\t\tsuccess : function(returnedData){\r\n");
      out.write("\t\t\t\t\t\tif(returnedData.status == true){\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n");
      out.write("\t\t\t\t\t\t\t//重新加载DataGrid。\r\n");
      out.write("\t\t\t\t\t\t\t$(\"#investRedeemListDataGrid\").datagrid(\"reload\");\t\t\t\t\t\t\t\r\n");
      out.write("\t\t\t\t\t\t}else{\r\n");
      out.write("\t\t\t\t\t\t\tparent.$.messager.alert(returnedData.title,returnedData.message,'error');\r\n");
      out.write("\t\t\t\t\t\t}\t\r\n");
      out.write("\t\t\t\t\t}\t\t\t\t\t\r\n");
      out.write("\t\t\t\t});\t\t\t\t\r\n");
      out.write("\t\t\t}\t\t\t\r\n");
      out.write("\t\t});\t\r\n");
      out.write("\t\t\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t//查看该投资人的理财产品详情界面\r\n");
      out.write("\tfunction showInvestorAndInvestProductsDetailsView(investOrderId){\t\t\t\r\n");
      out.write("\t\t$('#investorAndInvestProductsDialog').dialog({    \r\n");
      out.write("\t\t    title: '理财产品详情',    \r\n");
      out.write("\t\t    width: 800,    \t\r\n");
      out.write("\t\t    height: 350,    \r\n");
      out.write("\t\t    closed: false,\r\n");
      out.write("\t\t    closable: true,\r\n");
      out.write("\t\t    cache: false,    \r\n");
      out.write("\t\t    href: 'investOrder/investOrderAction!findInvestorAndInvestProductsDetails.action?investOrderId='+investOrderId,    \r\n");
      out.write("\t\t    modal: true   \r\n");
      out.write("\t\t});  \t\t\t\t\t\t\t\t\t\t\t\t\t \t\t\t\t\t\r\n");
      out.write("\t}\t\t\r\n");
      out.write("\t\t\r\n");
      out.write("\t//查看投资人详细信息\r\n");
      out.write("\tfunction showInvestorView(index){\r\n");
      out.write("\t\tvar rows = $(\"#investRedeemListDataGrid\").datagrid(\"getRows\");\r\n");
      out.write("\t\tvar row = rows[index];\r\n");
      out.write("\t\t$('#investorView').dialog({    \r\n");
      out.write("\t\t    title: '投资客户详情',    \r\n");
      out.write("\t\t    width: 800,    \r\n");
      out.write("\t\t    height: 550,    \r\n");
      out.write("\t\t    closed: false,    \r\n");
      out.write("\t\t    cache: false,    \r\n");
      out.write("\t\t    href: 'investor/investorAction!findInvestorByInvestorId.action?investorId='+row.investorId,    \r\n");
      out.write("\t\t    modal: true   \r\n");
      out.write("\t\t}); \r\n");
      out.write("\t}\t\r\n");
      out.write("\r\n");
      out.write("\t\r\n");
      out.write("\t// 查看该投资人的\"合同详情\"\r\n");
      out.write("\tfunction showInvestContractDetailsView(index){\r\n");
      out.write("\t\tvar row = this.getRowData4RedeemMainJsp(index);\r\n");
      out.write("\t\t$('#contractInfoDialog').dialog({    \r\n");
      out.write("\t\t    title: '合同详情',    \r\n");
      out.write("\t\t    width: 600,    \t\r\n");
      out.write("\t\t    height: 600,    \r\n");
      out.write("\t\t    closed: false,\r\n");
      out.write("\t\t    closable: true,\r\n");
      out.write("\t\t    cache: false,    \r\n");
      out.write("\t\t    href: 'investOrder/investOrderAction!findInvestorOrderContractDetails.action?investOrderId='+row.investOrderId,    \r\n");
      out.write("\t\t    modal: true   \r\n");
      out.write("\t\t});\t\t\t\t\r\n");
      out.write("\t}\t\r\n");
      out.write("\r\n");
      out.write("\t//查看审批意见\r\n");
      out.write("\tfunction checkInvestOrderOpinions(index){\r\n");
      out.write("\t\tvar rows = $(\"#investRedeemListDataGrid\").datagrid(\"getRows\");\r\n");
      out.write("\t\trow = rows[index];//获取本条数据\r\n");
      out.write("\t\t$('#OpinionsDialog').dialog({    \r\n");
      out.write("\t\t    title: '历史审查意见',    \r\n");
      out.write("\t\t    width: 800,    \r\n");
      out.write("\t\t    height: 500,    \r\n");
      out.write("\t\t    closed: false,    \r\n");
      out.write("\t\t    cache: false,    \r\n");
      out.write("\t\t    href: 'jsp/investOrder/optionsList.jsp',    \r\n");
      out.write("\t\t    modal: true   \r\n");
      out.write("\t\t});   \r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t//执行高级查询\r\n");
      out.write("\tfunction doSearch(){\r\n");
      out.write("\t\tvar investorName = $(\"#searchForm input[name='investorName']\").val();\r\n");
      out.write("\t\tvar contractNo = $(\"#searchForm input[name='contractNo']\").val();\r\n");
      out.write("\t\t\r\n");
      out.write("\t\t$(\"#investRedeemListDataGrid\").datagrid(\"load\", {\r\n");
      out.write("\t\t\tinvestorName : investorName,\r\n");
      out.write("\t\t\tcontractNo : contractNo\r\n");
      out.write("\t\t});   //传入空的高级查询条件。\r\n");
      out.write("\t\t\r\n");
      out.write("\t\t//若用户欲通过高级查询条件去过滤数据，导出报表。\r\n");
      out.write("\t\texportExcelUrl = \"investRedeem/investRedeemAction!exportExcel4RedeemInvestorDetails.action?investorName=\"+investorName+\"&contractNo=\"+contractNo;\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t\r\n");
      out.write("\t//清空高级查询的表单\r\n");
      out.write("\tfunction clearAdvancedQueryForm(){\r\n");
      out.write("\t\t$(\"#searchForm\").form(\"clear\");\r\n");
      out.write("\t\t$(\"#investRedeemListDataGrid\").datagrid(\"load\",{});\r\n");
      out.write("\t}\r\n");
      out.write("\r\n");
      out.write("\t//查看流程图\r\n");
      out.write("\tfunction checkProcessImg(index){\r\n");
      out.write("\t\tvar rows = $(\"#investRedeemListDataGrid\").datagrid(\"getRows\");\r\n");
      out.write("\t\tvar rowm = rows[index];//获取本条数据\r\n");
      out.write("\t\tvar src = \"investRedeem/investRedeemAction!checkWorkFlowImg4InvestRedeemByInvestOrderId.action?investOrderId=\" + rowm.investOrderId;\r\n");
      out.write("\t\t$('#imageDialog').dialog(\"open\");\r\n");
      out.write("\t\t$(\"#image\").attr(\"src\", src);\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t//提交投资赎回申请\r\n");
      out.write("\tfunction submitInvestRedeem(index){\r\n");
      out.write("\t\tvar row = getRowData4RedeemMainJsp(index);\t\t\r\n");
      out.write("\t\t$.messager.confirm('确定','是否确定提交所选的数据吗？',\tfunction(flag) {\t\t\t\r\n");
      out.write("\t\t\t$.ajax({\r\n");
      out.write("\t\t\t\turl:\"investRedeem/investRedeemAction!saveStartProcess4InvestRedeem.action\",\r\n");
      out.write("\t\t\t\tdata : {\"investOrderId\" : row.investOrderId},\r\n");
      out.write("\t\t\t\ttype : \"POST\",\r\n");
      out.write("\t\t\t\tsuccess : function(returnedData){\r\n");
      out.write("\t\t\t\t\tif(returnedData.status == true){\r\n");
      out.write("\t\t\t\t\t\t//显示后台返回的正确与否的状态。\r\n");
      out.write("\t\t\t\t\t\tparent.$.messager.show({\r\n");
      out.write("\t\t\t\t\t\t\ttitle : returnedData.title,\r\n");
      out.write("\t\t\t\t\t\t\tmsg : returnedData.message,\r\n");
      out.write("\t\t\t\t\t\t\ttimeout : 1000 * 2\r\n");
      out.write("\t\t\t\t\t\t});\t\t\t\t\t\t\r\n");
      out.write("\t\t\t\t\t\t//重新加载DataGrid。\r\n");
      out.write("\t\t\t\t\t\t$(\"#investRedeemListDataGrid\").datagrid(\"reload\");\r\n");
      out.write("\t\t\t\t\t}else{\r\n");
      out.write("\t\t\t\t\t\tparent.$.messager.alert(returnedData.title,returnedData.message,'error');\r\n");
      out.write("\t\t\t\t\t}\t\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t});\r\n");
      out.write("\t\t}); // End Of 是否确定提交所选的数据\t\t\r\n");
      out.write("\t} //提交投资赎回申请\t    \r\n");
      out.write("\t\r\n");
      out.write("\t\r\n");
      out.write("</script>\r\n");
      out.write("<body>\r\n");
      out.write("<div class=\"position\" style=\"margin-top: 5px;\">您当前所在位置： 业务管理  &gt; 财富业务管理  &gt; 投资赎回管理</div>\r\n");
      out.write("   <div class=\"well well-small\" style=\"margin-left: 5px;margin-top: 5px\">\r\n");
      out.write("\t\t<span class=\"badge\">投资赎回信息高级查询</span>\r\n");
      out.write("\t\t<p>\r\n");
      out.write("\t\t\t<form id=\"searchForm\" action=\"\" method=\"post\">\r\n");
      out.write("\t\t\t\t<table cellpadding=\"0\" cellspacing=\"1\" border=\"0\"\">\r\n");
      out.write("\t\t\t\t\t<tr>\t\r\n");
      out.write("\t\t\t\t\t\t<th>财富客户姓名：</th>\t\t\t\t\t\t\r\n");
      out.write("\t\t\t\t\t\t<td><input id=\"investorName\" name=\"investorName\" class=\"easyui-textbox\" style=\"width:100px;\" ></td>\r\n");
      out.write("\t\t\t\t\t\t<th>合同编号：</th>\t\t\t\t\t\t<!-- data-options=\"panelHeight:150\" -->\r\n");
      out.write("\t\t\t\t\t\t<td><input id=\"contractNo\" name=\"contractNo\" class=\"easyui-textbox\" style=\"width:100px;\"/></td>\r\n");
      out.write("\t\t\t\t\t\t<td>&nbsp;&nbsp;&nbsp;&nbsp;\r\n");
      out.write("\t\t\t\t\t\t\t<a href=\"javascript:void(0);\" class=\"easyui-linkbutton\" iconCls=\"icon-search\" plain=\"false\" onclick=\"doSearch();\">执行查询</a>&nbsp;&nbsp;\r\n");
      out.write("\t\t\t\t\t\t\t<a href=\"javascript:void(0);\" class=\"easyui-linkbutton\" iconCls=\"icon-reload\" plain=\"false\" onclick=\"clearAdvancedQueryForm()\">清空</a>\r\n");
      out.write("\t\t\t\t\t\t</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n");
      out.write("\t\t\t\t\t</tr>\t\t\t\t\t\t\r\n");
      out.write("\t\t\t\t</table>\r\n");
      out.write("\t\t\t</form>\t\t\t\r\n");
      out.write("\t\t</p>\t\t\t\t\r\n");
      out.write("   </div>\r\n");
      out.write("\r\n");
      out.write("   <!-- 新增投资赎回申请DIV区域 -->\r\n");
      out.write("   <div id=\"addInvestRedeemDialog\" class=\"easyui-dialog\" style=\"width:900px;height:600px;\" title=\"新增投资赎回申请\" data-options=\"modal:true,resizable:true,iconCls:'icon-add',closed: true\">\r\n");
      out.write("\t    <div title=\"已经完成审批的投资申请信息列表\">   \r\n");
      out.write("\t       <table id=\"approvedInvestApplyListDataGrid\" style=\"margin: 0px;padding: 0px;\"></table>\r\n");
      out.write("\t    </div>      \r\n");
      out.write("   </div>\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("   <!-- 投资赎回管理数据列表 -->\r\n");
      out.write("   <table id=\"investRedeemListDataGrid\" style=\"margin: 0px;padding: 0px;overflow: auto;\"></table>\r\n");
      out.write("\r\n");
      out.write("\t<!-- 投资客户信息对话框区域 -->\r\n");
      out.write("\t<div id=\"investorView\"></div>   \r\n");
      out.write("\t\r\n");
      out.write("\t<!-- 合同详情信息对话框区域 -->\r\n");
      out.write("\t<div id=\"contractInfoDialog\"></div>\t\r\n");
      out.write("   \r\n");
      out.write("\t<!-- 理财产品详情对话框区域 -->\r\n");
      out.write("\t<div id=\"investorAndInvestProductsDialog\"></div>   \r\n");
      out.write("   \r\n");
      out.write("\t<!-- 流程图片弹框 -->\r\n");
      out.write("\t<div id=\"imageDialog\" class=\"easyui-dialog\" title=\"流程图片\"\r\n");
      out.write("\t\t\tdata-options=\"border:false,closed:true,fit:true\">\r\n");
      out.write("\t\t\t<img id=\"image\" src=\"\">\r\n");
      out.write("\t</div>\r\n");
      out.write("      \r\n");
      out.write("\t<!-- 审查意见 -->\r\n");
      out.write("\t<div id=\"OpinionsDialog\"></div>\r\n");
      out.write("\t\r\n");
      out.write("</body>\r\n");
      out.write("</html>");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try {
            if (response.isCommitted()) {
              out.flush();
            } else {
              out.clearBuffer();
            }
          } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
