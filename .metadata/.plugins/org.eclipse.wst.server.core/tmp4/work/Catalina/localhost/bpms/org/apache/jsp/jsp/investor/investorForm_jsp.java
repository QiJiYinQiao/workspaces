/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.59
 * Generated at: 2015-12-15 02:08:27 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.jsp.investor;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import java.util.*;

public final class investorForm_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private javax.el.ExpressionFactory _el_expressionfactory;
  private org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public void _jspInit() {
    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
    _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html;charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n");
      out.write("<script type=\"text/javascript\" src=\"js/validate.js\"></script>\r\n");
      out.write("<style>\r\n");
      out.write(".easyui-textbox {\r\n");
      out.write("\theight: 18px;\r\n");
      out.write("\twidth: 170px;\r\n");
      out.write("\tline-height: 16px;\r\n");
      out.write("\tbox-shadow: 0 1px 1px rgba(0, 0, 0, 0.075) inset;\r\n");
      out.write("\ttransition: border 0.2s linear 0s, box-shadow 0.2s linear 0s;\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("textarea:focus, input[type=\"text\"]:focus {\r\n");
      out.write("\tborder-color: rgba(82, 168, 236, 0.8);\r\n");
      out.write("\tbox-shadow: 0 1px 1px rgba(0, 0, 0, 0.075) inset, 0 0 8px\r\n");
      out.write("\t\trgba(82, 168, 236, 0.6);\r\n");
      out.write("\toutline: 0 none;\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write(".table {\r\n");
      out.write("\tbackground-color: transparent;\r\n");
      out.write("\tborder-collapse: collapse;\r\n");
      out.write("\tborder-spacing: 0;\r\n");
      out.write("\tmax-width: 100%;\r\n");
      out.write("}\r\n");
      out.write("input, textarea {\r\n");
      out.write("\tfont-weight: normal;\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("td {\r\n");
      out.write("\ttext-align: left;\r\n");
      out.write("\tpadding: 6px;\r\n");
      out.write("}\r\n");
      out.write("th{\r\n");
      out.write("    text-align: right;\r\n");
      out.write("\tpadding: 6px;\r\n");
      out.write("}\r\n");
      out.write("</style>\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("    var provinceArr = jqueryUtil.getAreaTextArr(1);//获取省\r\n");
      out.write("    var relationshipArr;//与本人关系\r\n");
      out.write("\t$(function(){\r\n");
      out.write("\t\t$('#tt').tabs({    \r\n");
      out.write("\t\t    border:false    \r\n");
      out.write("\t\t}); \r\n");
      out.write("\t\t//性别\r\n");
      out.write("\t\t$(\"input[name='genderType']\").combobox({\r\n");
      out.write("\t\t\turl : \"common/commonAction!findTextArr.action?codeMyid=gender_type\",\r\n");
      out.write("\t\t\tvalueField : 'code',\r\n");
      out.write("\t\t\ttextField : 'text'\r\n");
      out.write("\t\t});\r\n");
      out.write("\t\t//婚姻状况\r\n");
      out.write("\t    $(\"input[name='maritalStatus']\").combobox({\r\n");
      out.write("\t\t\turl:\"common/commonAction!findTextArr.action?codeMyid=marriage_type\",\r\n");
      out.write("\t\t\tvalueField: 'code',\r\n");
      out.write("\t\t \ttextField: 'text'\r\n");
      out.write("\t    });\r\n");
      out.write(" \t    //证件类型\r\n");
      out.write("\t    $(\"input[name='idType']\").combobox({\r\n");
      out.write("\t\t\turl:\"common/commonAction!findTextArr.action?codeMyid=id_Type\",\r\n");
      out.write("\t\t\tvalueField: 'code',\r\n");
      out.write("\t\t \ttextField: 'text'\r\n");
      out.write("\t    }); \r\n");
      out.write("\t    //职业\r\n");
      out.write("\t    $(\"input[name='jobType']\").combobox({\r\n");
      out.write("\t\t\turl:\"common/commonAction!findTextArr.action?codeMyid=job_type\",\r\n");
      out.write("\t\t\tvalueField: 'code',\r\n");
      out.write("\t\t \ttextField: 'text'\r\n");
      out.write("\t    });\r\n");
      out.write("\t    //学历\r\n");
      out.write("\t    $(\"input[name='degreeType']\").combobox({\r\n");
      out.write("\t\t\turl:\"common/commonAction!findTextArr.action?codeMyid=degree_Type\",\r\n");
      out.write("\t\t\tvalueField: 'code',\r\n");
      out.write("\t\t \ttextField: 'text'\r\n");
      out.write("\t    });\r\n");
      out.write("\t    //单位规模\r\n");
      out.write("\t    $(\"input[name='compScale']\").combobox({\r\n");
      out.write("\t\t\turl:\"common/commonAction!findTextArr.action?codeMyid=company_scale_type\",\r\n");
      out.write("\t\t\tvalueField: 'code',\r\n");
      out.write("\t\t \ttextField: 'text'\r\n");
      out.write("\t    });\r\n");
      out.write("\t    //是否有子女\r\n");
      out.write("\t    $(\"input[name$='familyStatus']\").combobox({\r\n");
      out.write("\t\t\turl:\"common/commonAction!findTextArr.action?codeMyid=has_child\",\r\n");
      out.write("\t\t\tvalueField: 'code',\r\n");
      out.write("\t\t\ttextField: 'text'\r\n");
      out.write("\t\t});\r\n");
      out.write("\t\t//与本人关系\r\n");
      out.write("\t    $(\"input[name='relationship']\").combobox({\r\n");
      out.write("\t\t\turl:\"common/commonAction!findTextArr.action?codeMyid=relationship_type\",\r\n");
      out.write("\t\t\tvalueField: 'code',\r\n");
      out.write("\t\t\ttextField: 'text',\r\n");
      out.write("\t\t\tasync: false,\r\n");
      out.write("\t\t\tonLoadSuccess:function(){\r\n");
      out.write("\t\t\t\trelationshipArr = $(this).combobox('getData');\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t});\r\n");
      out.write("\t    //家庭收入情况\r\n");
      out.write("\t    $(\"input[name$='famIncSta']\").combobox({\r\n");
      out.write("\t\t\turl:\"common/commonAction!findTextArr.action?codeMyid=fam_inc_sta\",\r\n");
      out.write("\t\t\tvalueField: 'code',\r\n");
      out.write("\t\t\ttextField: 'text'\r\n");
      out.write("\t\t});\r\n");
      out.write("\t    //渲染基本信息省市县\r\n");
      out.write("\t    renderProvinceSelect(\"provinceId\",\"cityId\",\"areaId\");\r\n");
      out.write("\t    //渲染紧急联系人地址\r\n");
      out.write("\t    renderProvinceSelect(\"linkPeopleProvinceId\",\"linkPeopleCityId\",\"linkPeopleAreaId\");\r\n");
      out.write("\t    //渲染紧急联系人列表\r\n");
      out.write("\t    initLinkPeopleGrid();\r\n");
      out.write("\t})\r\n");
      out.write("\t//省\r\n");
      out.write("\tfunction renderProvinceSelect(pid,cid,aid){\r\n");
      out.write("\t\t$.ajax({\r\n");
      out.write("\t\t\ttype:\"POST\",\r\n");
      out.write("\t\t\turl:'common/commonAction!findAreaDic.action?parentId=1',\r\n");
      out.write("\t\t\tdataType:\"json\",\r\n");
      out.write("\t\t\tasync:false,\r\n");
      out.write("\t\t\tsuccess:function(iJson){\r\n");
      out.write("\t\t\t\tvar arr = eval(iJson);\r\n");
      out.write("\t\t\t\t$('#'+pid).combobox({   \r\n");
      out.write("\t\t\t\t\tdata:arr,\r\n");
      out.write("\t\t            valueField:'code',   \r\n");
      out.write("\t\t            textField:'text',\r\n");
      out.write("\t\t            editable:false,\r\n");
      out.write("\t\t            onLoadSuccess:function(){\r\n");
      out.write("\t\t            \tvar indexOneVal = $(\"#\"+pid).combobox(\"getValue\");//获取一级栏目值\r\n");
      out.write("\t\t\t\t\t\tif(indexOneVal != null && indexOneVal != \"\"){\r\n");
      out.write("\t\t\t\t\t\t\t//渲染二级栏目下拉框\r\n");
      out.write("\t\t\t\t\t\t\trenderCitySelect(cid,aid,indexOneVal);\r\n");
      out.write("\t\t\t            }\r\n");
      out.write("\t\t            },\r\n");
      out.write("\t\t            onChange:function(newvalue,oldvalue){\r\n");
      out.write("\t\t                //渲染二级栏目下拉框\r\n");
      out.write("\t\t            \trenderCitySelect(cid,aid,newvalue);\r\n");
      out.write("\t\t            \t$(\"#\"+cid).combobox(\"setValue\",\"\");\r\n");
      out.write("\t\t            \t$(\"#\"+aid).combobox(\"setValue\",\"\");\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t        }); \r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t});\r\n");
      out.write("\t}\r\n");
      out.write("\t//市\r\n");
      out.write("\tfunction renderCitySelect(cid,aid,pvalue){\r\n");
      out.write("\t\t$.ajax({\r\n");
      out.write("\t\t\ttype:\"POST\",\r\n");
      out.write("\t\t\turl: 'common/commonAction!findAreaDic.action?parentId='+pvalue,\r\n");
      out.write("\t\t\tdataType:\"json\",\r\n");
      out.write("\t\t\tasync:false,\r\n");
      out.write("\t\t\tsuccess:function(iJson){\r\n");
      out.write("\t\t\t\tvar arr = eval(iJson);\r\n");
      out.write("\t\t\t\t$('#'+cid).combobox({   \r\n");
      out.write("\t\t\t\t\tdata:arr,\r\n");
      out.write("\t\t            valueField:'code',   \r\n");
      out.write("\t\t            textField:'text',\r\n");
      out.write("\t\t            editable:false,\r\n");
      out.write("\t\t            onLoadSuccess:function(){\r\n");
      out.write("\t\t\t\t\t\tvar indexTwoVal = $(\"#\"+cid).combobox(\"getValue\");//获取二级栏目已选择的值\r\n");
      out.write("\t\t\t\t\t\tif(indexTwoVal != null && indexTwoVal != \"\"){\r\n");
      out.write("\t\t\t\t\t\t\trenderAreaSelect(aid,indexTwoVal);\r\n");
      out.write("\t\t\t\t\t\t}\r\n");
      out.write("\t                },\r\n");
      out.write("\t\t            onChange:function(newvalue,oldvalue){\r\n");
      out.write("\t\t            \trenderAreaSelect(aid,newvalue);\r\n");
      out.write("\t\t            \t$(\"#\"+aid).combobox(\"setValue\",\"\");\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t        }); \r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t});\r\n");
      out.write("\t}\r\n");
      out.write("    //县\r\n");
      out.write("\tfunction renderAreaSelect(aid,cvalue){\r\n");
      out.write("\t\t$.ajax({\r\n");
      out.write("\t\t\ttype:\"POST\",\r\n");
      out.write("\t\t\turl: 'common/commonAction!findAreaDic.action?parentId='+cvalue,\r\n");
      out.write("\t\t\tdataType:\"json\",\r\n");
      out.write("\t\t\tasync:false,\r\n");
      out.write("\t\t\tsuccess:function(iJson){\r\n");
      out.write("\t\t\t\tvar arr = eval(iJson);\r\n");
      out.write("\t\t\t\t$('#'+aid).combobox({   \r\n");
      out.write("\t\t\t\t\tdata:arr,\r\n");
      out.write("\t\t            valueField:'code',   \r\n");
      out.write("\t\t            textField:'text',\r\n");
      out.write("\t\t            editable:false\r\n");
      out.write("\t\t        }); \r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t});\r\n");
      out.write("\t}\r\n");
      out.write("    //渲染紧急联系人列表\r\n");
      out.write("    function initLinkPeopleGrid(investorId){\r\n");
      out.write("    \tvar uri = \"\";\r\n");
      out.write("    \tif(investorId != null){\r\n");
      out.write("    \t\turi = \"contacts/contactsAction!findInvestorContactListByInvestorId.action?investorId=\"+investorId\r\n");
      out.write("    \t}else{\r\n");
      out.write("    \t\turi = \"contacts/contactsAction!findInvestorContactListByInvestorId.action\";\r\n");
      out.write("    \t}\r\n");
      out.write("    \t$(\"#linkPeopleGrid\").datagrid({\r\n");
      out.write("    \t\turl : uri,\r\n");
      out.write("    \t\twidth : 875,\r\n");
      out.write("    \t\theight : 250,\r\n");
      out.write("    \t\tpagination:false,\r\n");
      out.write("    \t\trownumbers:true,\r\n");
      out.write("    \t\tborder:true,\r\n");
      out.write("    \t\tsingleSelect:false,\r\n");
      out.write("    \t\tnowrap:true,\r\n");
      out.write("    \t\tmultiSort:false,\r\n");
      out.write("    \t\tcolumns : [ [\r\n");
      out.write("                         {field : 'ck',rowspan:2,checkbox : true},\r\n");
      out.write("    \t\t             {field : 'chName',title : '姓名',width : 80,rowspan:2,align : 'center'},\r\n");
      out.write("    \t\t             {field : 'relationship',title : '与本人关系',width : 80,rowspan:2,align : 'center',formatter:function(value,row,index){\r\n");
      out.write("    \t\t            \t return jqueryUtil.showText(value,relationshipArr);\r\n");
      out.write("    \t\t             }},\r\n");
      out.write("    \t\t             {field : 'tel',title : '移动电话',width : 140,rowspan:2,align : 'center'},\r\n");
      out.write("    \t\t             {field : 'idNo',title : '证件号码',width : 120,rowspan:2,align : 'center'},\r\n");
      out.write("    \t\t             {title : '通讯地址',width : 340,colspan:4,align : 'center'}\r\n");
      out.write("    \t\t],[\r\n");
      out.write("    \t\t\t\t\t {field : 'compProvince',title : '省',width : 80,align : 'center',formatter:function(value,row,index){\r\n");
      out.write("    \t\t\t\t\t\t return jqueryUtil.showText(value,provinceArr);\r\n");
      out.write("    \t\t\t\t\t }},\r\n");
      out.write("    \t\t\t\t\t {field : 'compCity',title : '市',width : 80,align : 'center',formatter:function(value,row,index){\r\n");
      out.write("    \t\t\t\t\t\t var cityArr = jqueryUtil.getAreaTextArr(row.compProvince);\r\n");
      out.write("    \t\t\t\t\t\t return jqueryUtil.showText(value,cityArr);\r\n");
      out.write("    \t\t\t\t\t }},\r\n");
      out.write("    \t\t\t\t\t {field : 'compArea',title : '县/区',width : 80,align : 'center',formatter:function(value,row,index){\r\n");
      out.write("    \t\t\t\t\t\t var areaArr = jqueryUtil.getAreaTextArr(row.compCity);\r\n");
      out.write("    \t\t\t\t\t\t return jqueryUtil.showText(value,areaArr);\r\n");
      out.write("    \t\t\t\t\t }},\r\n");
      out.write("    \t\t\t\t\t {field : 'compAddrDetails',title : '详细地址',width : 200,align : 'center'}\r\n");
      out.write("    \t\t]],\r\n");
      out.write("    \t\ttoolbar: [{\r\n");
      out.write("    \t\t\ticonCls: 'icon-edit',\r\n");
      out.write("    \t\t\ttext:'编辑',\r\n");
      out.write("    \t\t\thandler: toEditContact\r\n");
      out.write("    \t\t},\"-\",{\r\n");
      out.write("    \t\t\ticonCls: 'icon-cut',\r\n");
      out.write("    \t\t\ttext:'删除',\r\n");
      out.write("    \t\t\thandler:toDelete\r\n");
      out.write("    \t\t},'-',{\r\n");
      out.write("    \t\t\ticonCls: 'icon-save',\r\n");
      out.write("    \t\t\ttext:'保存',\r\n");
      out.write("    \t\t\thandler: toSaveInvestorAndContacts\r\n");
      out.write("    \t\t}]\r\n");
      out.write("    \t});\r\n");
      out.write("    }\r\n");
      out.write("    //保存贷款人客户基本信息\r\n");
      out.write("    function saveInvestor(){\r\n");
      out.write("    \tvar isValid = $(\"#baseInfoForm\").form('validate');\r\n");
      out.write("    \tif(!isValid){\r\n");
      out.write("    \t\treturn false;\r\n");
      out.write("    \t}\r\n");
      out.write("    \t$.ajax({\r\n");
      out.write("    \t\ttype: \"POST\",\r\n");
      out.write("    \t\turl:\"investor/investorAction!persistenceInvestorDlg.action\",\r\n");
      out.write("    \t\tdata:$('#baseInfoForm').serialize(),\r\n");
      out.write("    \t\tasync: false,//默认true设置下，所有请求均为异步请求\r\n");
      out.write("    \t\tcache: true,\r\n");
      out.write("    \t    success: function(iJson) {\r\n");
      out.write("    \t    \tif(iJson.status){\r\n");
      out.write("    \t    \t\t$(\"#investorId\").val(iJson.data);//保存成功保存投资人id\r\n");
      out.write("    \t    \t\tdisableForm();//禁用form\r\n");
      out.write("    \t    \t}\r\n");
      out.write("    \t    \tparent.$.messager.show({\r\n");
      out.write("    \t\t\t\ttitle : '提示',\r\n");
      out.write("    \t\t\t\tmsg : iJson.message,\r\n");
      out.write("    \t\t\t\ttimeout : 4000 * 2\r\n");
      out.write("    \t\t\t}); \r\n");
      out.write("    \t    }\r\n");
      out.write("    \t});\r\n");
      out.write("    }\r\n");
      out.write("    //禁用form表单\r\n");
      out.write("    function disableForm(){\r\n");
      out.write("    \t$(\"#saveId\").hide();//保存按钮影藏\r\n");
      out.write("    \t$(\"#editId\").show();//修改按钮显示出来\r\n");
      out.write("    \t$(\"#rsetId\").hide();//重置按钮隐藏\r\n");
      out.write("    \t$(\"#sign\").val(\"save\");//设为为保存状态\r\n");
      out.write("    \t$(\"#baseInfoForm input[class^='easyui-']\").each(function(i){\r\n");
      out.write("    \t\tif($(this).hasClass(\"easyui-textbox easyui-validatebox\")){\r\n");
      out.write("    \t\t\t$(this).attr(\"disabled\",true);\r\n");
      out.write("    \t\t}else if($(this).hasClass(\"easyui-datebox\")){\r\n");
      out.write("    \t\t\t$(this).datebox({disabled: true});\r\n");
      out.write("    \t\t}else if($(this).hasClass(\"easyui-combobox\")){\r\n");
      out.write("    \t\t\t$(this).combobox(\"disable\");\r\n");
      out.write("    \t\t}else if($(this).hasClass(\"easyui-numberbox\")){\r\n");
      out.write("    \t\t\t$(this).numberbox(\"disable\");\r\n");
      out.write("    \t\t}else{\r\n");
      out.write("    \t\t}\r\n");
      out.write("    \t})\r\n");
      out.write("    \t$(\"#baseInfoForm select\").combobox(\"disable\");\r\n");
      out.write("    }\r\n");
      out.write("    //解禁form\r\n");
      out.write("    function editForm(){\r\n");
      out.write("    \t$(\"#editId\").hide();//修改按钮影藏\r\n");
      out.write("    \t$(\"#saveId\").show();//保存按钮显示出来\r\n");
      out.write("    \t$(\"#rsetId\").show();//重置按钮显示\r\n");
      out.write("    \t$(\"#sign\").val(\"edit\");//设为为编辑状态\r\n");
      out.write("    \t$(\"#baseInfoForm input[class^='easyui-']\").each(function(i){\r\n");
      out.write("    \t\tif($(this).hasClass(\"easyui-textbox easyui-validatebox\")){\r\n");
      out.write("    \t\t\t$(this).attr(\"disabled\",false);\r\n");
      out.write("    \t\t}else if($(this).hasClass(\"easyui-datebox\")){\r\n");
      out.write("    \t\t\t$(this).datebox({disabled: false});\r\n");
      out.write("    \t\t}else if($(this).hasClass(\"easyui-combobox\")){\r\n");
      out.write("    \t\t\t$(this).combobox(\"enable\");\r\n");
      out.write("    \t\t}else if($(this).hasClass(\"easyui-numberbox\")){\r\n");
      out.write("    \t\t\t$(this).numberbox(\"enable\");\r\n");
      out.write("    \t\t}else{\r\n");
      out.write("    \t\t}\r\n");
      out.write("    \t})\r\n");
      out.write("    \t$(\"#baseInfoForm select\").combobox(\"enable\");\r\n");
      out.write("    }\r\n");
      out.write("    //重置\r\n");
      out.write("    function clearForm(){\r\n");
      out.write("    \t$(\"#baseInfoForm\").form(\"clear\");//form清空\r\n");
      out.write("    \t$(\"#linkPeopleGrid\").datagrid('reload',{loanerId:null});//刷新列表\r\n");
      out.write("    \t$(\"#sign\").val(\"edit\");//设为编辑状态\r\n");
      out.write("    }\r\n");
      out.write("    //保存紧急联系人\r\n");
      out.write("    function saveLinkInfo(){\r\n");
      out.write("    \tvar $sign = $(\"#sign\").val();\r\n");
      out.write("    \tif(\"edit\" == $sign){\r\n");
      out.write("    \t\t$.messager.alert(\"提示\",\"请您填写投资人客户基本资料并保存!\",\"warning\");return;\r\n");
      out.write("    \t}\r\n");
      out.write("    \tvar isValid = $(\"#linkPeopleForm\").form('validate');\r\n");
      out.write("    \tif(!isValid){\r\n");
      out.write("    \t\treturn false;\r\n");
      out.write("    \t}\r\n");
      out.write("    \tvar investorId = $(\"#investorId\").val();//投资人id\r\n");
      out.write("    \t$(\"#cusId\").val(investorId);\r\n");
      out.write("    \t$.ajax({\r\n");
      out.write("    \t\ttype: \"POST\",\r\n");
      out.write("    \t\turl:\"contacts/contactsAction!saveContacts.action\",\r\n");
      out.write("    \t\tdata:$('#linkPeopleForm').serialize(),\r\n");
      out.write("    \t\tasync: false,//默认true设置下，所有请求均为异步请求\r\n");
      out.write("    \t\tcache: true,\r\n");
      out.write("    \t    success: function(iJson) {\r\n");
      out.write("    \t    \tif(iJson.status){//保存成功\r\n");
      out.write("    \t    \t\t$(\"#linkPeopleForm\").form('clear');//清空表单\r\n");
      out.write("    \t    \t\tinitLinkPeopleGrid(investorId)\r\n");
      out.write("    \t    \t//\t$(\"#linkPeopleGrid\").datagrid('reload',{loanerId:investorId});//刷新列表\r\n");
      out.write("    \t    \t}\r\n");
      out.write("    \t    \tparent.$.messager.show({\r\n");
      out.write("    \t\t\t\ttitle : '提示',\r\n");
      out.write("    \t\t\t\tmsg : iJson.message,\r\n");
      out.write("    \t\t\t\ttimeout : 4000 * 2\r\n");
      out.write("    \t\t\t}); \r\n");
      out.write("    \t    }\r\n");
      out.write("    \t});\r\n");
      out.write("    }\r\n");
      out.write("    //紧急联系人删除\r\n");
      out.write("    function toDelete(){\r\n");
      out.write("    \tvar selected = $('#linkPeopleGrid').datagrid('getSelections');\r\n");
      out.write("    \tif (selected.length <= 0) {\r\n");
      out.write("    \t\t$.messager.alert(\"提示\", \"请至少选择一条记录执行删除!\", \"warning\");\r\n");
      out.write("    \t\treturn;\r\n");
      out.write("    \t}\r\n");
      out.write("    \tvar ids = new Array();\r\n");
      out.write("    \tfor(var i=0,len=selected.length; i<len; i++){\r\n");
      out.write("    \t\tids.push(selected[i].contactId);\r\n");
      out.write("    \t}\r\n");
      out.write("    \tids = ids.join(\",\");\r\n");
      out.write("    \t$.messager.confirm('删除', '执行删除后，数据将不可恢复,是否执行?', function(d) {\r\n");
      out.write("    \t\tif (d) {\r\n");
      out.write("    \t\t\t$.ajax( {\r\n");
      out.write("    \t\t\t\ttype : \"POST\",\r\n");
      out.write("    \t\t\t\turl : 'contacts/contactsAction!deleteByContactId.action',\r\n");
      out.write("    \t\t\t\tdata : \"contactIds=\"+ids,\r\n");
      out.write("    \t\t\t\tdataType:'JSON',\r\n");
      out.write("    \t\t\t\tsuccess : function(iJson) {\r\n");
      out.write("    \t\t\t\t\tif(iJson.status){\r\n");
      out.write("    \t\t\t\t\t\t//投资人客户id\r\n");
      out.write("    \t\t\t\t\t\tvar investorId = $(\"#investorId\").val();\r\n");
      out.write("    \t\t\t\t\t\t//刷新列表\r\n");
      out.write("    \t\t\t\t\t\tinitLinkPeopleGrid(investorId);\r\n");
      out.write("    \t\t\t\t\t\t//$(\"#linkPeopleGrid\").datagrid(\"reload\",{loanerId:investorId});\r\n");
      out.write("    \t\t\t\t\t}\r\n");
      out.write("    \t\t\t\t\tparent.$.messager.show({\r\n");
      out.write("    \t\t\t\t\t\ttitle : iJson.title,\r\n");
      out.write("    \t\t\t\t\t\tmsg : iJson.message,\r\n");
      out.write("    \t\t\t\t\t\ttimeout : 4000 * 2\r\n");
      out.write("    \t\t\t\t\t});\r\n");
      out.write("    \t\t\t\t}\r\n");
      out.write("    \t\t\t});\r\n");
      out.write("    \t\t}\r\n");
      out.write("    \t});\r\n");
      out.write("    }\r\n");
      out.write("    //保存紧急联系人与投资人的关系\r\n");
      out.write("    function toSaveInvestorAndContacts(){\r\n");
      out.write("    \t//投资人客户id\r\n");
      out.write("\t\tvar investorId = $(\"#investorId\").val();\r\n");
      out.write("    \tvar selected = $('#linkPeopleGrid').datagrid('getSelections');\r\n");
      out.write("    \tif (selected.length <= 0) {\r\n");
      out.write("    \t\t$.messager.alert(\"提示\", \"请至少勾选一个联系人作为本次投资的紧急联系人!\", \"warning\");\r\n");
      out.write("    \t\treturn;\r\n");
      out.write("    \t}\r\n");
      out.write("    \tvar ids = new Array();\r\n");
      out.write("    \tfor(var i=0;i<selected.length;i++){\r\n");
      out.write("    \t\tids.push(selected[i].contactId);\r\n");
      out.write("    \t}\r\n");
      out.write("    \tids=ids.join(\",\"); \r\n");
      out.write("    \t$.ajax( {\r\n");
      out.write("    \t\ttype : \"POST\",\r\n");
      out.write("    \t\turl : 'InvestorAndContacts/InvestorAndContactsAction!saveInvestorAndContacts.action',\r\n");
      out.write("    \t\tdata: \"contactIds=\"+ids+\"&investorId=\"+investorId,\r\n");
      out.write("    \t\tdataType:'JSON',\r\n");
      out.write("    \t\tsuccess : function(iJson) {\r\n");
      out.write("    \t\t\tparent.$.messager.show({\r\n");
      out.write("    \t\t\t\ttitle : iJson.title,\r\n");
      out.write("    \t\t\t\tmsg : iJson.message,\r\n");
      out.write("    \t\t\t\ttimeout : 4000 * 2\r\n");
      out.write("    \t\t\t});\r\n");
      out.write("    \t\t}\r\n");
      out.write("    \t});\r\n");
      out.write("    }\r\n");
      out.write("    //编辑紧急联系人\r\n");
      out.write("    function toEditContact(){\r\n");
      out.write("    \tvar row = $(\"#linkPeopleGrid\").datagrid(\"getSelected\");\r\n");
      out.write("    \tvar rows = $('#linkPeopleGrid').datagrid('getSelections');\r\n");
      out.write("    \tif (row == null) {\r\n");
      out.write("    \t\t$.messager.alert(\"提示\", \"请选择一条记录进行编辑!\", \"warning\");\r\n");
      out.write("    \t\treturn;\r\n");
      out.write("    \t}\r\n");
      out.write("    \tif(rows.length >1){\r\n");
      out.write("    \t\t$.messager.alert(\"提示\", \"您只能选择一条记录执行编辑!\", \"warning\");\r\n");
      out.write("    \t\treturn;\r\n");
      out.write("    \t}\r\n");
      out.write("    \t//将数据加载到表单中\r\n");
      out.write("    \t$(\"#linkPeopleForm\").form('load',row);\r\n");
      out.write("    \t//渲染市区\r\n");
      out.write("        renderCitySelect('linkPeopleCityId','linkPeopleAreaId',row.compProvince);\r\n");
      out.write("        $(\"#linkPeopleCityId\").combobox(\"setValue\",row.compCity);\r\n");
      out.write("        $(\"#linkPeopleAreaId\").combobox(\"setValue\",row.compArea);\r\n");
      out.write("    }\r\n");
      out.write("</script>\r\n");
      out.write("<div id=\"tt\">\r\n");
      out.write("  <div title=\"客户基本信息\">\r\n");
      out.write("\t  <div class=\"well well-small\" style=\"margin:5px;\">\r\n");
      out.write("\t    <form id=\"baseInfoForm\">\r\n");
      out.write("\t      <input id=\"investorId\" name=\"investorId\" type=\"hidden\"/><!-- 投资人id -->\r\n");
      out.write("\t      <input name=\"investorStatus\" type=\"hidden\"/><!-- 投资人状态 -->\r\n");
      out.write("\t      <input name=\"commAddr\" type=\"hidden\"/><!-- 通讯地址 -->\r\n");
      out.write("\t      <input id=\"sign\" type=\"hidden\" value=\"edit\"/><!-- 修改or保存状态标志 -->\r\n");
      out.write("\t      <input name=\"createDate\" type=\"hidden\"/>\r\n");
      out.write("\t      <input name=\"creator\" type=\"hidden\"/>\r\n");
      out.write("\t      <input name=\"updateDate\" type=\"hidden\"/>\r\n");
      out.write("\t      <input name=\"updator\" type=\"hidden\"/>\r\n");
      out.write("          <table>\r\n");
      out.write("             <tr>\r\n");
      out.write("                <th>姓名(中文):</th>\r\n");
      out.write("                <td><input name=\"chName\" class=\"easyui-textbox easyui-validatebox\" data-options=\"validType:'length[0,25]'\"/></td>\r\n");
      out.write("                <th>姓名(英文):</th>\r\n");
      out.write("                <td><input name=\"enName\" class=\"easyui-textbox easyui-validatebox\" data-options=\"validType:'length[0,25]'\"/></td>\r\n");
      out.write("                <th>性别:</th>\r\n");
      out.write("                <td><input name=\"genderType\" class=\"easyui-textbox easyui-combobox\" panelHeight=\"auto\" editable=\"false\"/></td>\r\n");
      out.write("             </tr>\r\n");
      out.write("             <tr>\r\n");
      out.write("                <th>出生日期:</th>\r\n");
      out.write("                <td><input name=\"birthday\" class=\"easyui-textbox easyui-datebox\" editable=\"false\"/></td>\r\n");
      out.write("                <th>国籍:</th>\r\n");
      out.write("                <td><input name=\"nationality\" class=\"easyui-textbox easyui-validatebox\" data-options=\"validType:'length[0,25]'\"/></td>\r\n");
      out.write("                <th>婚姻状况:</th>\r\n");
      out.write("                <td><input name=\"maritalStatus\" class=\"easyui-textbox easyui-combobox\" panelHeight=\"auto\" editable=\"false\"/></td>\r\n");
      out.write("             </tr>\r\n");
      out.write("             <tr>\r\n");
      out.write("                <th>证件类型:</th>\r\n");
      out.write("                <td><select name=\"idType\" class=\"easyui-textbox easyui-combobox\" panelHeight=\"auto\" editable=\"false\">\r\n");
      out.write("                \t<option value=\"A\">身份证</option>\r\n");
      out.write("                </select></td>\r\n");
      out.write("                <th>证件号码:</th>\r\n");
      out.write("                <td><input name=\"idNo\" class=\"easyui-textbox easyui-validatebox\" data-options=\"validType:'idcard'\"/></td>\r\n");
      out.write("                <th>签发日期:</th>\r\n");
      out.write("                <td><input name=\"idIssueDate\"  class=\"easyui-textbox easyui-datebox\" editable=\"false\"/></td>\r\n");
      out.write("             </tr>\r\n");
      out.write("             <tr>\r\n");
      out.write("                <th>失效日期:</th>\r\n");
      out.write("                <td><input name=\"idExpireDate\" class=\"easyui-textbox easyui-datebox\" editable=\"false\"/></td>\r\n");
      out.write("                <th>发证机构所在地:</th>\r\n");
      out.write("                <td><input name=\"idLocation\" class=\"easyui-textbox easyui-validatebox\" data-options=\"validType:'length[0,127]'\"/></td>\r\n");
      out.write("                <th>学历:</th>\r\n");
      out.write("                <td><input name=\"degreeType\" class=\"easyui-textbox easyui-combobox\" panelHeight=\"auto\" editable=\"false\"/></td>\r\n");
      out.write("             </tr>\r\n");
      out.write("             <tr>\r\n");
      out.write("                <th>职业:</th>\r\n");
      out.write("                <td><input name=\"jobType\" class=\"easyui-textbox easyui-combobox\" panelHeight=\"auto\" editable=\"false\"/></td>\r\n");
      out.write("                <th>行业:</th>\r\n");
      out.write("                <td><input name=\"industry\" class=\"easyui-textbox easyui-validatebox\" data-options=\"validType:'length[0,50]'\"/></td>\r\n");
      out.write("                <th>单位名称:</th>\r\n");
      out.write("                <td><input name=\"companyName\" class=\"easyui-textbox easyui-validatebox\" data-options=\"validType:'length[0,127]'\"/></td>\r\n");
      out.write("             </tr>\r\n");
      out.write("             <tr>\r\n");
      out.write("                <th>工作年限(年):</th>\r\n");
      out.write("                <td><input name=\"yearsOfWork\" class=\"easyui-textbox easyui-numberbox\" data-options='max:100'/></td>\r\n");
      out.write("                <th>单位规模:</th>\r\n");
      out.write("                <td><input name=\"compScale\" class=\"easyui-textbox easyui-combobox\" panelHeight=\"auto\" editable=\"false\"/></td>\r\n");
      out.write("                <th>职务:</th>\r\n");
      out.write("                <td><input name=\"jobTitle\" class=\"easyui-textbox easyui-validatebox\" data-options=\"validType:'length[0,100]'\"/></td>\r\n");
      out.write("             </tr>\r\n");
      out.write("             <tr>\r\n");
      out.write("                <th>移动电话:</th>\r\n");
      out.write("                <td><input name=\"mobileTel\" class=\"easyui-textbox easyui-validatebox\" data-options=\"validType:'mobile'\"/></td>\r\n");
      out.write("                <th>固定电话:</th>\r\n");
      out.write("                <td><input name=\"fixedTel\" class=\"easyui-textbox easyui-validatebox\" data-options=\"validType:'phone'\"/></td>\r\n");
      out.write("                <th>电子邮箱:</th>\r\n");
      out.write("                <td><input name=\"email\" class=\"easyui-textbox easyui-validatebox\" data-options=\"validType:'email'\"/></td>\r\n");
      out.write("             </tr>\r\n");
      out.write("             <tr>\r\n");
      out.write("                <th>邮编:</th>\r\n");
      out.write("                <td><input name=\"zip\" class=\"easyui-textbox easyui-validatebox\" data-options=\"validType:'zip'\"/></td>\r\n");
      out.write("                <th>家庭情况:</th>\r\n");
      out.write("                <td><input name=\"familyStatus\" class=\"easyui-textbox easyui-combobox\" panelHeight=\"auto\" editable=\"false\"/></td>\r\n");
      out.write("                <th>家庭收入情况:</th>\r\n");
      out.write("                <td><input name=\"famIncSta\" class=\"easyui-textbox easyui-combobox\" panelHeight=\"auto\" editable=\"false\"/></td>\r\n");
      out.write("             </tr>\r\n");
      out.write("             <tr>\r\n");
      out.write("                <th>通讯地址:</th>\r\n");
      out.write("                <td colspan=\"5\">\r\n");
      out.write("                                                      省:<input id=\"provinceId\" name=\"provinceId\" type=\"text\" class=\"easyui-combobox\" style=\"width: 100px;\"/>\r\n");
      out.write("\t\t\t                  市:<input id=\"cityId\" name=\"cityId\" type=\"text\" class=\"easyui-combobox\" style=\"width: 100px;\"/> \r\n");
      out.write("\t\t\t           区/县:<input id=\"areaId\" name=\"areaId\" type=\"text\" class=\"easyui-combobox\" style=\"width: 100px;\"/> \r\n");
      out.write("\t\t\t              街道:<input name=\"addressDetails\" class=\"easyui-textbox easyui-validatebox\" data-options=\"validType:'length[0,250]'\" style=\"width: 340px;\"/>     \r\n");
      out.write("                </td>\r\n");
      out.write("             </tr>\r\n");
      out.write("             <tr>\r\n");
      out.write("                <th>客户类型:</th>\r\n");
      out.write("                <td colspan=\"5\">\r\n");
      out.write("                   <select class=\"easyui-combobox\" name=\"investorType\" panelHeight=\"auto\" editable=\"false\" style=\"width:170px\">   \r\n");
      out.write("\t\t\t\t    <option value=\"A\">个人</option>   \r\n");
      out.write("\t\t\t\t   </select>\r\n");
      out.write("\t\t\t    </td>\r\n");
      out.write("             </tr>\r\n");
      out.write("             <tr>\r\n");
      out.write("\t             <td colspan=\"6\" style=\"text-align: right;\">\r\n");
      out.write("\t                <a href=\"javascript:void(0)\" id=\"rsetId\" class=\"easyui-linkbutton\" iconCls=\"icon-reload\" onclick=\"clearForm();\">重置</a>\r\n");
      out.write("\t                <a href=\"javascript:void(0)\" id=\"editId\" class=\"easyui-linkbutton\" iconCls=\"icon-edit\" style=\"display: none;\" onclick=\"editForm()\">编辑</a>\r\n");
      out.write("\t                <a href=\"javascript:void(0)\" id=\"saveId\" class=\"easyui-linkbutton\" iconCls=\"icon-save\" onclick=\"saveInvestor();\">保存</a>\r\n");
      out.write("\t             </td>\r\n");
      out.write("             </tr>\r\n");
      out.write("          </table>\r\n");
      out.write("      </form>\r\n");
      out.write("\t  </div>\r\n");
      out.write("  </div>\r\n");
      out.write("  <div title=\"紧急联系人\">\r\n");
      out.write("    <div class=\"well well-small\" style=\"margin:5px\">\r\n");
      out.write("       <form id=\"linkPeopleForm\">\r\n");
      out.write("         <input name=\"contactId\" type=\"hidden\"><!-- 紧急联系人id -->\r\n");
      out.write("         <input id=\"cusId\" name=\"cusId\" type=\"hidden\"/><!-- 投资人客户id -->\r\n");
      out.write("         <input name=\"cusType\" type=\"hidden\"/><!-- 客户类型 -->\r\n");
      out.write("         <input name=\"contactStatus\" type=\"hidden\"/><!-- 紧急联系人状态 -->\r\n");
      out.write("         <input name=\"age\" type=\"hidden\"/><!-- 年龄 -->\r\n");
      out.write("         <input name=\"jobTitle\" type=\"hidden\"/><!-- 职务 -->\r\n");
      out.write("        <!-- <input name=\"annualSalary\" type=\"hidden\"/> 年收入 -->\r\n");
      out.write("         <input name=\"yearsOfWork\" type=\"hidden\"/><!-- 工作年限 -->\r\n");
      out.write("         <input name=\"compTel\" type=\"hidden\"/><!-- 单位电话 -->\r\n");
      out.write("         <input name=\"compAddr\" type=\"hidden\"/><!-- 单位地址 -->\r\n");
      out.write("         <input name=\"currAddr\" type=\"hidden\"/><!-- 现住地址 -->\r\n");
      out.write("         <input name=\"workplace\" type=\"hidden\"/><!-- 工作单位 -->\r\n");
      out.write("         <input name=\"creator\" type=\"hidden\"/><!-- 创建人 -->\r\n");
      out.write("         <input name=\"createDate\" type=\"hidden\"/><!-- 创建日期 -->\r\n");
      out.write("         <table class=\"table\">\r\n");
      out.write("           <tr>\r\n");
      out.write("             <th>姓名(中文):</th>\r\n");
      out.write("             <td><input name=\"chName\" class=\"easyui-textbox easyui-validatebox\" data-options=\"validType:'length[0,16]'\"/></td>\r\n");
      out.write("             <th>姓名(英文)</th>\r\n");
      out.write("             <td><input name=\"enName\" class=\"easyui-textbox easyui-validatebox\" data-options=\"validType:'length[0,16]'\"/></td>\r\n");
      out.write("             <th>性别:</th>\r\n");
      out.write("             <td><input name=\"genderType\" class=\"easyui-textbox easyui-validatebox\" panelHeight=\"auto\" editable=\"false\"/></td>\r\n");
      out.write("           </tr>\r\n");
      out.write("           <tr>\r\n");
      out.write("             <th>出生日期:</th>\r\n");
      out.write("             <td><input name=\"birthday\" class=\"easyui-textbox easyui-validatebox easyui-datebox\" editable=\"false\"/></td>\r\n");
      out.write("             <th>证件类型:</th>\r\n");
      out.write("             <td><input  name=\"idType\" class=\"easyui-textbox easyui-validatebox\" panelHeight=\"auto\" editable=\"false\"/></td>\r\n");
      out.write("             <th>证件号码:</th>\r\n");
      out.write("             <td><input name=\"idNo\" class=\"easyui-textbox easyui-validatebox\" data-options=\"validType:'idcard'\"/></td>\r\n");
      out.write("           </tr>\r\n");
      out.write("           <tr>\r\n");
      out.write("             <th>移动电话:</th>\r\n");
      out.write("             <td><input name=\"tel\" class=\"easyui-textbox easyui-validatebox\" data-options=\"validType:'mobile'\"/></td>\r\n");
      out.write("             <th>固定电话:</th>\r\n");
      out.write("             <td><input name=\"fixedTel\" class=\"easyui-textbox easyui-validatebox\" data-options=\"validType:'phone'\"/></td>\r\n");
      out.write("             <th>电子邮箱:</th>\r\n");
      out.write("             <td><input name=\"email\" class=\"easyui-textbox easyui-validatebox\" data-options=\"validType:'email'\"/></td>\r\n");
      out.write("           </tr>\r\n");
      out.write("           <tr>\r\n");
      out.write("             <th>与您的关系:</th>\r\n");
      out.write("             <td><input name=\"relationship\" class=\"easyui-textbox easyui-validatebox\" panelHeight=\"auto\" editable=\"false\"/></td>\r\n");
      out.write("             <th>邮编:</th>\r\n");
      out.write("             <td><input name=\"zip\" class=\"easyui-textbox easyui-validatebox\" data-options=\"validType:'zip'\"/></td>\r\n");
      out.write("           </tr>\r\n");
      out.write("           <tr>\r\n");
      out.write("             <th>通讯地址:</th>\r\n");
      out.write("             <td colspan=\"5\">\r\n");
      out.write("                                                     省:<input id=\"linkPeopleProvinceId\" name=\"compProvince\" type=\"text\" class=\"easyui-combobox\" style=\"width: 100px;\"/>\r\n");
      out.write("\t\t\t                  市:<input id=\"linkPeopleCityId\" name=\"compCity\" type=\"text\" class=\"easyui-combobox\" style=\"width: 100px;\"/> \r\n");
      out.write("\t\t\t           区/县:<input id=\"linkPeopleAreaId\" name=\"compArea\" type=\"text\" class=\"easyui-combobox\" style=\"width: 100px;\"/> \r\n");
      out.write("\t\t\t              街道:<input name=\"compAddrDetails\" class=\"easyui-textbox easyui-validatebox\" data-options=\"validType:'length[0,250]'\" style=\"width: 280px;\"/>     \r\n");
      out.write("             </td>\r\n");
      out.write("           </tr>\r\n");
      out.write("           <tr>\r\n");
      out.write("             <td colspan=\"6\" style=\"text-align: right;\">\r\n");
      out.write("                <a href=\"javascript:void(0)\" class=\"easyui-linkbutton\" iconCls=\"icon-save\" onclick=\"saveLinkInfo();\">保存</a>\r\n");
      out.write("             </td>\r\n");
      out.write("           </tr>\r\n");
      out.write("         </table>\r\n");
      out.write("       </form>\r\n");
      out.write("    </div>\r\n");
      out.write("    <div style=\"margin: 5px;\">\r\n");
      out.write("        <table id=\"linkPeopleGrid\"></table>\r\n");
      out.write("    </div>\r\n");
      out.write("  </div>\r\n");
      out.write("</div>\r\n");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try {
            if (response.isCommitted()) {
              out.flush();
            } else {
              out.clearBuffer();
            }
          } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
